{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\manager\\public/assets\\manager\\public\\tableMgr.ts"],"names":[],"mappings":";;;;;AAAA,yDAAoD;AAEpD;IAAA;QAUY,eAAU,GAA+B,EAAE,CAAC;IAiCxD,CAAC;IAvCiB,oBAAW,GAAzB;QACI,IAAI,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE;YAC5B,QAAQ,CAAC,SAAS,GAAG,IAAI,QAAQ,EAAE,CAAC;SACvC;QACD,OAAO,QAAQ,CAAC,SAAS,CAAC;IAC9B,CAAC;IASM,yBAAM,GAAb,UAAc,IAAY,EAAE,SAAc;QACtC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;YACvC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,gBAAM,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,YAAU,IAAM,EAAE,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;SAC5F;QACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACjB,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YACxB,OAAO,IAAI,CAAC;SACf;QACD,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YAC1B,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBACvC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACvC;YACD,OAAO,GAAG,CAAC;SACd;aAAM;YACH,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;SACjC;IACL,CAAC;IAEO,yBAAM,GAAd,UAAe,GAAQ;QACf,IAAA,2BAAqC,EAApC,WAAG,EAAE,aAAK,CAA2B;QAC1C,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,GAAG,CAAC,IAAI,KAAK,EAAf,CAAe,CAAC,CAAC;QACrD,OAAO,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;IAC9B,CAAC;IAzCD,MAAM;IACS,kBAAS,GAAa,IAAI,CAAC;IAyC9C,eAAC;CA3CD,AA2CC,IAAA;kBA3CoB,QAAQ","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\manager\\public","sourcesContent":["import Loader from \"../../framework/modules/Loader\";\r\n\r\nexport default class TableMgr {\r\n    //单例处理\r\n    private static _instance: TableMgr = null;\r\n\r\n    public static getInstance(): TableMgr {\r\n        if (TableMgr._instance == null) {\r\n            TableMgr._instance = new TableMgr();\r\n        }\r\n        return TableMgr._instance;\r\n    }\r\n    private _tableList: { [table: string]: any[] } = {};\r\n    private _curTable: any[];\r\n    /**\r\n     * @param name 配表名\r\n     * @param condition 查询条件\r\n     */\r\n    public search(name: string, condition: { [key: string]: any }): any\r\n    public search(name: string, condition: { [key: string]: any }[]): any[]\r\n    public search(name: string, condition: any): any {\r\n        if (!this._tableList.hasOwnProperty(name)) {\r\n            this._tableList[name] = Loader.getInstance().getRes(`config/${name}`, cc.JsonAsset).json;\r\n        }\r\n        this._curTable = this._tableList[name];\r\n        if (!this._curTable) {\r\n            console.error(\"没有此配表!\");\r\n            return null;\r\n        }\r\n        if (Array.isArray(condition)) {\r\n            let arr = [];\r\n            for (let i = 0; i < condition.length; ++i) {\r\n                arr.push(this._query(condition[i]));\r\n            }\r\n            return arr;\r\n        } else {\r\n            return this._query(condition);\r\n        }\r\n    }\r\n\r\n    private _query(obj: any) {\r\n        let [key, value] = Object.entries(obj)[0];\r\n        let data = this._curTable.find(v => v[key] == value);\r\n        return data ? data : null;\r\n    }\r\n}"]}