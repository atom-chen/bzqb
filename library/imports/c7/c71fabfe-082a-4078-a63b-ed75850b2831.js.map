{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\role/assets\\modules\\plaza\\script\\role\\role.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\role","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport { userMoney } from \"../../../../manager/public/interface/iUserInfo\";\nimport UserMgr from \"../../../../manager/public/userMgr\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport RoleMgr from \"../../../../manager/public/roleMgr\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport { role } from \"../../../../manager/public/interface/iRole\";\nimport Package from \"../../../../framework/net/package\";\nimport { dataids } from \"../../../../framework/net/dataids\";\n\n\n/*\nauthor: 陈斌杰\n日期:2018-11-09 15:44:09\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: RoleCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tpublic userMoney: userMoney = UserMgr.getInstance().userMoney;\n\tpublic rolesData: role[] = RoleMgr.getInstance().rolesData;\t\t//角色列表数据\n\tpublic choiceRole: any = RoleMgr.getInstance().choiceRole;\t\t//当前选择使用的角色的数据\n\tpublic nowShowRoleData: any = this.choiceRole;\t\t\t\t\t//当前显示的角色的数据\n\n\t//设置当前显示的角色的数据\n\tpublic setNowShowRoleData(data: any): void {\n\t\tthis.nowShowRoleData = data;\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\tbtn_close: ctrl.btn_close,\n\t\tgold: ctrl.moneyFrame.getChildByName(\"gold\").getComponent(cc.Label),\t\t//金币\n\t\tcrystal: ctrl.moneyFrame.getChildByName(\"crystal\").getComponent(cc.Label),\t//粉晶\n\t\tdiamond: ctrl.moneyFrame.getChildByName(\"diamond\").getComponent(cc.Label),\t//钻石\n\t\troleInfo: ctrl.roleInfo,\t\t\t\t\t\t\t\t\t\t\t\t\t//角色预制\n\t\troleFrame: ctrl.roleFrame,\t\t\t\t\t\t\t\t\t\t\t\t\t//角色预制容器\n\t\trolePic: ctrl.rolePic,\t\t\t\t\t\t\t\t\t\t\t\t\t\t//显示的角色图片\n\t\tisChoice: ctrl.isChoice,\t\t\t\t\t\t\t\t\t\t\t\t\t//当前选择图片\n\t\tbtn_use: ctrl.btn_use,\t\t\t\t\t\t\t\t\t\t\t\t\t\t//使用按钮\n\t\tbtn_unlock: ctrl.btn_unlock,\t\t\t\t\t\t\t\t\t\t\t\t//解锁按钮\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.refreshMoneyUI();\n\t\tthis.initRoleList();\n\t\tthis.refreshShowRole(this.model.choiceRole);\n\t}\n\n\t//刷新特技界面金钱数据\n\tpublic refreshMoneyUI(): void {\n\t\tthis.ui.gold.string = this.numberEllipsis(this.model.userMoney.gold);\n\t\tthis.ui.crystal.string = this.numberEllipsis(this.model.userMoney.crystal);\n\t\tthis.ui.diamond.string = this.numberEllipsis(this.model.userMoney.diamond);\n\t}\n\n\t//初始化角色列表\n\tpublic initRoleList(): void {\n\t\tlet rolesData = this.model.rolesData;\n\t\tlet row: number = 0;\n\t\tlet column: number = 0;\n\t\tfor (let i = 0; i < rolesData.length; i++) {\n\t\t\tlet role = rolesData[i];\n\t\t\tlet roleNode = this.addPrefabNode(this.ui.roleInfo, this.ui.roleFrame);\n\t\t\tcolumn = i % 3;\n\t\t\tif (i != 0 && i % 3 == 0) {\n\t\t\t\trow++;\n\t\t\t\tthis.ui.roleFrame.height = 190 * (row + 1);\n\t\t\t}\n\t\t\troleNode.x = -170 + 170 * column;\n\t\t\troleNode.y = -95 - 190 * row;\n\t\t\troleNode.getComponent(\"roleInfo\").initRole(role);\n\t\t}\n\t}\n\n\t//刷新显示的角色图片\n\tpublic refreshShowRole(data: any): void {\n\t\tlet id = data.roleId - 1001;\n\t\tthis.loadImage(`rolePic_${id}`).then((sprf) => {\n\t\t\tthis.ui.rolePic.spriteFrame = sprf;\n\t\t});\n\t\tthis.ui.isChoice.active = false;\n\t\tthis.ui.btn_use.active = false;\n\t\tthis.ui.btn_unlock.active = false;\n\t\tif (data.isUsing) {\n\t\t\tthis.ui.isChoice.active = true;\n\t\t} else {\n\t\t\tthis.ui.btn_use.active = data.isUnlock;\n\t\t\tthis.ui.btn_unlock.active = !data.isUnlock;\n\t\t}\n\t}\n\n\t//刷新角色列表解锁的角色UI\n\tpublic refreshRoleList(): void {\n\t\tfor (let i = 0; i < this.ui.roleFrame.childrenCount; i++) {\n\t\t\tlet roleNode = this.ui.roleFrame.children[i];\n\t\t\tlet roleData = roleNode.getComponent(\"roleInfo\").model.roleData;\n\t\t\tif (this.model.nowShowRoleData.roleId == roleData.roleId) {\n\t\t\t\troleNode.getComponent(\"roleInfo\").ui.lock.active = false;\n\t\t\t}\n\t\t}\n\t\tthis.ui.btn_unlock.active = false;\n\t\tthis.ui.btn_use.active = true;\n\t}\n\n\t//刷新使用按钮\n\tpublic refreshUsingBtn(): void{\n\t\tthis.ui.isChoice.active = true;\n\t\tthis.ui.btn_unlock.active = false;\n\t\tthis.ui.btn_use.active = false;\n\t}\n}\n//c, 控制\n@ccclass\nexport default class RoleCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Button)\n\tbtn_close: cc.Button = null;\n\t@property(cc.Node)\n\tmoneyFrame: cc.Node = null;\n\t@property(cc.Prefab)\n\troleInfo: cc.Prefab = null;\n\t@property(cc.Node)\n\troleFrame: cc.Node = null;\n\t@property(cc.Sprite)\n\trolePic: cc.Sprite = null;\n\t@property(cc.Node)\n\tisChoice: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_use: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_unlock: cc.Node = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {\n\t\t\t\"plaza.role.unlockRole\": this.unlockRole,\n\t\t\t\"plaza.role.switchRole\": this.switchRole,\n\t\t};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {\n\t\t\t\"refreshMoneyUI\": this.refreshMoneyUI,\n\t\t\t\"refreshRolePic\": this.refreshRolePic,\n\t\t};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.ui.btn_close, () => {\n\t\t\tthis.closeModule(\"role\");\n\t\t}, \"关闭角色界面\");\n\t\tthis.connect(\"click\", this.ui.btn_unlock, () => {\n\t\t\tthis.openSubModule(\"roleUnlock\").then((obj) => {\n\t\t\t\tobj.initUnlock(this.model.nowShowRoleData);\n\t\t\t});\n\t\t}, \"打开角色解锁界面\");\n\t\tthis.connect(\"click\", this.ui.btn_use, () => {\n\t\t\tRoleMgr.getInstance().sendReqUsingRole(this.model.nowShowRoleData.id);\n\t\t}, \"使用当前角色\");\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t//刷新金钱显示\n\tpublic refreshMoneyUI(): void {\n\t\tthis.view.refreshMoneyUI();\n\t}\n\n\t//刷新显示的角色\n\tpublic refreshRolePic(data: any): void {\n\t\tthis.model.setNowShowRoleData(data);\n\t\tthis.view.refreshShowRole(data);\n\t}\n\n\t//刷新解锁的角色UI\n\tpublic unlockRole(msg: Package): void {\n\t\tlet unlockRoleData = msg.getDataByType(dataids.ID_UNLOCK_ROLE);\n\t\tlet data = RoleMgr.getInstance().getRoleDataByItem(unlockRoleData[0].itemId);\n\t\tthis.refreshRolePic(data);\n\t\tthis.view.refreshRoleList();\n\t}\n\n\t//刷新使用的角色\n\tpublic switchRole(): void {\n\t\tthis.view.refreshUsingBtn();\n\t}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}