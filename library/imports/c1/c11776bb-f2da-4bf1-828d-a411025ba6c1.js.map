{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\guilds/assets\\modules\\plaza\\script\\guilds\\createGuild.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\guilds","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\r\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\r\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\r\nimport GuildsMgr from \"../../../../manager/public/guildsMgr\";\r\nimport { enums } from \"../../../../manager/enums\";\r\nimport TableMgr from \"../../../../manager/public/tableMgr\";\r\n\r\n/*\r\nauthor: 汤凯\r\n日期:2018-11-19\r\n*/\r\n\r\n//MVC模块,\r\nconst { ccclass, property } = cc._decorator;\r\nlet ctrl: CreateGuildCtrl;\r\n//模型，数据处理\r\nclass Model extends BaseModel {\r\n\tguildName = null;\r\n\tbadgeId = 0;\r\n\tenterType = enums.GuildJoinType_AllJoin;\r\n\tneededStage = 1;\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\tupdateEnterType(increment)\r\n\t{\r\n\t\tthis.enterType += increment;\r\n\t\tif(this.enterType>enums.GuildJoinType_CannotJoin) {\r\n\t\t\tthis.enterType=enums.GuildJoinType_AllJoin;\r\n\t\t}\r\n\t\tif(this.enterType<enums.GuildJoinType_AllJoin) {\r\n\t\t\tthis.enterType=enums.GuildJoinType_CannotJoin;\r\n\t\t}\r\n\t}\r\n\tupdateNeededStage(increment)\r\n\t{\r\n\t\tthis.neededStage += increment;\r\n\t\tif(this.neededStage>10) {\r\n\t\t\tthis.neededStage=1;\r\n\t\t}\r\n\t\tif(this.neededStage<1) {\r\n\t\t\tthis.neededStage=10;\r\n\t\t}\r\n\t}\r\n\tupdateBadge(badgeId)\r\n\t{\r\n\t\tthis.badgeId = badgeId;\r\n\t}\r\n}\r\n//视图, 界面显示或动画，在这里完成\r\nclass View extends BaseView {\r\n\tprotected model: Model;\r\n\tprotected node: cc.Node;\r\n\tpublic ui={\r\n\t\tbtn_create: ctrl.btn_create,\r\n\t\tbtn_close: ctrl.btn_close,\r\n\t\tedit_guildName:ctrl.edit_guildName,\r\n\t\tlbl_guildType:ctrl.lbl_guildType,\r\n\t\tlbl_guildRank:ctrl.lbl_guildRank,\r\n\t\tbtn_enterTypeUp: ctrl.btn_enterTypeUp,\r\n\t\tbtn_enterTypeDown: ctrl.btn_enterTypeDown,\r\n\t\tbtn_divisionUp: ctrl.btn_divisionUp,\r\n\t\tbtn_divisionDown: ctrl.btn_divisionDown,\r\n\t\tnode_iconsPanel: ctrl.node_iconsPanel,\r\n\t\tbtn_selectIcons: ctrl.btn_selectIcons,\r\n\t\tbtn_clippingNode: ctrl.btn_clippingNode\r\n\t}\r\n\tconstructor(model){\r\n\t\tsuper(model);\r\n\t\tthis.node = ctrl.node;\r\n\t\tthis.initUi();\r\n\t}\r\n\t//初始化ui\r\n\tpublic initUi() {\r\n\r\n\t}\r\n\tupdateEnterType()\r\n\t{\r\n\r\n\t\tswitch(this.model.enterType)\r\n\t\t{\r\n\t\t\tcase enums.GuildJoinType_CannotJoin:\r\n\t\t\t\tthis.ui.lbl_guildType.string = '不可加入';\r\n\t\t\tbreak;\r\n\t\t\tcase enums.GuildJoinType_NeedApproval:\r\n\t\t\t\tthis.ui.lbl_guildType.string = '需要批准';\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.ui.lbl_guildType.string = '允许任何人';\r\n\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\tupdateNeededStage()\r\n\t{\r\n        let card =TableMgr.getInstance().search('duanwei_duanwei',{stage:this.model.neededStage});\r\n\t\tthis.ui.lbl_guildRank.string = card.name;\r\n\t}\r\n\tupdateBadge()\r\n\t{\r\n\r\n\t\tswitch(this.model.badgeId)\r\n\t\t{\r\n\t\t\tcase enums.Get_Gold:\r\n\t\t\t\t// this.ui.lbl_guildRank.string = '不可加入';\r\n\t\t\tbreak;\r\n\t\t\tcase enums.Get_Gold:\r\n\t\t\t\t// this.ui.lbl_guildRank.string = '需要批准';\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\t// this.ui.lbl_guildRank.string = '允许任何人';\r\n\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\tshowIconsPanel(flag)\r\n\t{\r\n\t\tthis.ui.node_iconsPanel.active = flag;\r\n\t}\r\n}\r\n//c, 控制\r\n@ccclass\r\nexport default class CreateGuildCtrl extends BaseCtrl {\r\n\tprotected view: View;\r\n\tprotected model: Model;\r\n\t//这边去声明ui组件\r\n\t@property(cc.Button)\r\n\tbtn_create: cc.Button = null;\r\n\t@property(cc.Button)\r\n\tbtn_close: cc.Button = null;\r\n\t@property(cc.EditBox)\r\n\tedit_guildName: cc.EditBox = null;\r\n\t@property(cc.Label)\r\n\tlbl_guildType: cc.Label = null;\r\n\t@property(cc.Label)\r\n\tlbl_guildRank: cc.Label = null;\r\n\t@property(cc.Sprite)\r\n\tspr_guildBadge: cc.Sprite = null;\r\n\t@property(cc.Button)\r\n\tbtn_enterTypeUp: cc.Button = null;\r\n\t@property(cc.Button)\r\n\tbtn_enterTypeDown: cc.Button = null;\r\n\t@property(cc.Button)\r\n\tbtn_divisionUp: cc.Button = null;\r\n\t@property(cc.Button)\r\n\tbtn_divisionDown: cc.Button = null;\r\n\t@property(cc.Node)\r\n\tnode_iconsPanel: cc.Node = null;\r\n\t@property(cc.Button)\r\n\tbtn_clippingNode: cc.Button = null;\r\n\t@property(cc.Button)\r\n\tbtn_selectIcons: cc.Button = null;\r\n\t//声明ui组件end\r\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\r\n\r\n\r\n\tonLoad (){\r\n\t\t// 控制器\r\n\t\tctrl = this;\r\n\t\t// 创建mvc模式中模型和视图\r\n\t\tthis.initMvc(Model,View);\r\n\t}\r\n\r\n\t//定义网络事件\r\n\tprotected defineNetEvents() {\r\n\t \tthis.n_events = {\r\n            'plaza.guild.createGuild': this.plaza_guild_createGuild\r\n        };\r\n\t}\r\n\t//定义全局事件\r\n\tprotected defineGlobalEvents() {\r\n\t\tthis.g_events = {};\r\n\t}\r\n\t//绑定操作的回调\r\n\tconnectUi() {\r\n\t\tthis.connect(\"click\",this.ui.btn_create,this.btnCreate.bind(this),\"创建公会\");\r\n\t\tthis.connect(\"click\",this.ui.btn_close,this.btnClose.bind(this),\"关闭\");\r\n\t\t// this.connect(\"text-changed\",this.ui.edit_guildName,this.editGuildNameChanged.bind(this),\"公会名称编辑中\");\r\n\t\tthis.connect(\"editing-did-ended\",this.ui.edit_guildName,this.editGuildNameChangedEnd.bind(this),\"公会名称编辑完\");\r\n\t\tthis.connect(\"click\",this.ui.btn_enterTypeUp,this.btnEnterTypeUp.bind(this),\"关闭\");\r\n\t\tthis.connect(\"click\",this.ui.btn_enterTypeDown,this.btnEnterTypeDown.bind(this),\"关闭\");\r\n\t\tthis.connect(\"click\",this.ui.btn_divisionUp,this.btnDivisionUp.bind(this),\"关闭\");\r\n\t\tthis.connect(\"click\",this.ui.btn_divisionDown,this.btnDivisionDown.bind(this),\"关闭\");\r\n\t\tthis.connect(\"click\",this.ui.btn_selectIcons,this.btnSelectIcons.bind(this),\"点击切换公会徽章\");\r\n\t\tthis.connect(\"click\",this.ui.btn_clippingNode,this.btnClippingNode.bind(this),\"点击隐藏底板\");\r\n\t\tthis.connectIcons();\r\n\t}\r\n\tconnectIcons()\r\n\t{\r\n\t\tlet iconsList = this.node_iconsPanel.children;\r\n\t\tfor (let i = 0; i < iconsList.length; i++) {\r\n\t\t\tthis.connect(\"click\",iconsList[i],()=>{\r\n\t\t\t\tconsole.log(\"click icon\",i);\r\n\t\t\t\tthis.view.showIconsPanel(false);\r\n\t\t\t}),\"点击徽章\");\r\n\t\t}\r\n\t}\r\n\tbtnSelectIcons()\r\n\t{\r\n\t\tthis.view.showIconsPanel(true);\r\n\t}\r\n\tbtnClippingNode()\r\n\t{\r\n\t\tthis.view.showIconsPanel(false);\r\n\t}\r\n\tbtnEnterTypeUp()\r\n\t{\r\n\t\tthis.model.updateEnterType(1);\r\n\t\tthis.view.updateEnterType();\r\n\t}\r\n\tbtnEnterTypeDown()\r\n\t{\r\n\t\tthis.model.updateEnterType(-1);\r\n\t\tthis.view.updateEnterType();\r\n\t}\r\n\tbtnDivisionUp()\r\n\t{\r\n\t\tthis.model.updateNeededStage(1);\r\n\t\tthis.view.updateNeededStage();\r\n\t}\r\n\tbtnDivisionDown()\r\n\t{\r\n\t\tthis.model.updateNeededStage(-1);\r\n\t\tthis.view.updateNeededStage();\r\n\t}\r\n\tbtnCreate()\r\n\t{\r\n\t\tif(this.model.guildName) {\r\n\t\t\tGuildsMgr.getInstance().reqCreateGuild(this.model.guildName,this.model.badgeId,this.model.enterType,this.model.neededStage);\r\n\t\t}\r\n\t}\r\n\tbtnClose()\r\n\t{\r\n\t\tthis.remove();\r\n\t}\r\n\teditGuildNameChanged(event)\r\n\t{\r\n\t}\r\n\teditGuildNameChangedEnd(event)\r\n\t{\r\n\t\tthis.model.guildName = event.string;\r\n\t}\r\n\tplaza_guild_createGuild()\r\n\t{\r\n\t\tGuildsMgr.getInstance().reqMyGuildDetail();\r\n\t\tGuildsMgr.getInstance().reqGuildMembers(GuildsMgr.getInstance().getGuildId(),0);\r\n\t\tthis.remove();\r\n\t\tthis.closeModule(\"guilds\");\r\n\t\tthis.openSubModule('guildsInfo');\r\n\t}\r\n\t// update(dt) {}\r\n\r\n\tonDestroy() {\r\n\t\tsuper.onDestroy();\r\n\t}\r\n}"]}