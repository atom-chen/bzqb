{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\manager\\public/assets\\manager\\public\\signInMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\manager\\public","sourcesContent":["import BaseMgr from \"../../framework/baseClass/BaseMgr\";\nimport { signInList, signIn, signInRewark, totalSignIn, totalSignInList } from \"./interface/iSignInfo\";\nimport Package from \"../../framework/net/package\";\nimport GameNet from \"../../framework/modules/GameNet\";\nimport { dataids } from \"../../framework/net/dataids\";\nimport { enums } from \"../enums\";\n\n/*\nauthor: 陈斌杰\n日期:2018-11-21 10:44:38\n*/\nexport default class SignInMgr extends BaseMgr {\n\tpublic isFrist: boolean = false;\t\t\t\t\t\t\t\t//是否第一次请求数据\n\tpublic signInCfgTab: any = null;\t\t\t\t\t\t\t\t//签到配表\n\tpublic signIn_totalRewarkCfgTab: any = null;\t\t\t\t\t//累积签到宝箱配表\n\tpublic signInData: signInList = <signInList>{};\t\t\t\t\t//签到所有数据\n\tpublic totalBoxesData: totalSignInList = <totalSignInList>{};\t//累积宝箱数据\n\tpublic multiDay: number = 0;\t\t\t\t\t\t\t\t\t//累积签到天数\n\tpublic signIn_Reissues: number = enums.SignIn_Reissues;\t\t\t//每月补签次数\n\tpublic signIn_ReissuesCost: number = enums.SignIn_ReissuesCost;\t//每月补签费用\n\tconstructor() {\n\t\tsuper();\n\t\tthis.routes = {\n\t\t\t\"plaza.signin.reqSigninInfo\": this.reqSigninInfo,\t\t//签到信息\n\t\t\t\"plaza.signin.signin\": this.signin,\t\t\t\t\t\t//签到\n\t\t\t\"plaza.signin.repairSignin\": this.repairSignin,\t\t\t//补签\n\t\t\t\"plaza.signin.recMultiSignin\": this.recMultiSignin,\t\t//累积签到宝箱\n\t\t};\n\t}\n\n\t// 单例处理\n\tprivate static _instance: SignInMgr = null;\n\tpublic static getInstance(): SignInMgr {\n\t\tif (SignInMgr._instance == null) {\n\t\t\tSignInMgr._instance = new SignInMgr();\n\t\t}\n\t\treturn SignInMgr._instance;\n\t}\n\n\t//向服务器请求签到信息数据\n\tpublic sendReqSignInInfo(): void {\n\t\tthis.send_msg(\"plaza.signin.reqSigninInfo\");\n\t}\n\n\t//获取服务器下发的签到信息\n\tpublic reqSigninInfo(msg: Package): void {\n\t\tthis.isFrist = true;\n\t\tlet data = msg.getDataByType(dataids.ID_GET_SIGNIN_INFO);\n\t\tthis.getSignInCfgTab();\n\t\tthis.initSignInData();\n\t\tthis.initTotalBoxesData();\n\t\tthis.setSignInData(data.listSignin);\n\t\tthis.setTotalBoxesData(data.listMultiSignin);\n\t\tthis.signIn_Reissues -= data.repairTimes;\t//data.repairTimes 当前签到的次数\n\t}\n\n\t//向服务器请求签到数据\n\tpublic sendReqSignIn(): void {\n\t\tthis.send_msg(\"plaza.signin.signin\");\n\t}\n\n\t//获取服务器下发的签到数据\n\tpublic signin(msg: Package): void {\n\t\tthis.isFrist = true;\n\t\tlet data = msg.getDataByType(dataids.ID_DOSIGNIN_RECINFO);\n\t\tthis.setNowSignInData(data.dayIndex);\n\t\tthis.multiDay++;\n\t}\n\n\t//向服务器发送补签请求\n\tpublic sendReqRepairSignIn(dayIndex: any): void {\n\t\tlet msg = {\n\t\t\tdayIndex: dayIndex,\n\t\t}\n\t\tthis.send_msg(\"plaza.signin.repairSignin\", msg);\n\t}\n\n\t//获取服务器下发的补签数据\n\tpublic repairSignin(msg: Package): void {\n\t\tlet data = msg.getDataByType(dataids.ID_DOSIGNIN_RECINFO);\n\t\tthis.setNowSignInData(data.dayIndex);\n\t\tthis.signIn_Reissues--;\n\t\tthis.multiDay++;\n\t}\n\n\t//向服务器发送累积签到宝箱请求\n\tpublic sendReqMultiSignIn(dayIndex: any): void {\n\t\tlet msg = {\n\t\t\tmultiDayIndex: dayIndex,\n\t\t}\n\t\tthis.send_msg(\"plaza.signin.recMultiSignin\", msg);\n\t}\n\n\t//获取服务器下发的累积签到宝箱数据\n\tpublic recMultiSignin(msg: Package): void {\n\t\tlet data = msg.getDataByType(dataids.ID_MULTISIGNIN_RECINFO);\n\t\tthis.setNowBoxesData(data.multiDayIndex);\n\t}\n\n\t//获取签到配表\n\tpublic getSignInCfgTab(): void {\n\t\tthis.signInCfgTab = this.getConfigSync(\"signIn\").json;\n\t\tthis.signIn_totalRewarkCfgTab = this.getConfigSync(\"signIn_totalRewark\").json;\n\t}\n\n\t//初始化全部签到数据\n\tpublic initSignInData(): void {\n\t\tthis.signInData.list = [];\n\t\tfor (let i = 0; i < this.signInCfgTab.length; i++) {\n\t\t\tlet cfgData = this.signInCfgTab[i];\n\t\t\tlet signIn: signIn = <signIn>{};\n\t\t\tsignIn.rewark = <signInRewark>{}\n\t\t\tsignIn.rewark.type = cfgData.reward.type;\n\t\t\tsignIn.rewark.itemId = cfgData.reward.itemId;\n\t\t\tsignIn.rewark.amount = cfgData.reward.amount;\n\t\t\tsignIn.isSignIn = false;\n\t\t\tsignIn.signInDay = cfgData.day;\n\t\t\tsignIn.again_signIn = false;\n\t\t\tsignIn.vipLv = cfgData.vip_Level;\n\t\t\tthis.signInData.list.push(signIn);\n\t\t}\n\t}\n\n\t//初始化累积签到宝箱数据\n\tpublic initTotalBoxesData(): void {\n\t\tthis.totalBoxesData.list = [];\n\t\tfor (let i = 0; i < this.signIn_totalRewarkCfgTab.length; i++) {\n\t\t\tlet totalBoxesData = this.signIn_totalRewarkCfgTab[i];\n\t\t\tlet boxes: totalSignIn = <totalSignIn>{};\n\t\t\tboxes.isOpen = false;\n\t\t\tboxes.totalSignInDay = totalBoxesData.total_Days;\n\t\t\tboxes.rewarkList = [];\n\t\t\tfor (let j = 0; j < totalBoxesData.total_reward.length; j++) {\n\t\t\t\tlet rewarkData = totalBoxesData.total_reward[j];\n\t\t\t\tlet rewark = <signInRewark>{};\n\t\t\t\trewark.type = rewarkData.type;\n\t\t\t\trewark.itemId = rewarkData.itemId;\n\t\t\t\trewark.amount = rewarkData.amount;\n\t\t\t\tboxes.rewarkList.push(rewark);\n\t\t\t}\n\t\t\tthis.totalBoxesData.list.push(boxes);\n\t\t}\n\t}\n\n\t//设置全部签到数据\n\tpublic setSignInData(data: any): void {\n\t\tlet nowDay = new Date().getDate();\n\t\tif (data == null || data.length == 0) {\t\t\t//第一次进入签到一次都没签到过\n\t\t\tfor (let i = 0; i < this.signInData.list.length; i++) {\n\t\t\t\tlet signIn = this.signInData.list[i];\n\t\t\t\tif (signIn.signInDay < nowDay) {\n\t\t\t\t\tsignIn.again_signIn = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0; i < this.signInData.list.length; i++) {\n\t\t\tlet signIn = this.signInData.list[i];\n\t\t\tfor (let j = 0; j < data.length; j++) {\n\t\t\t\tif (signIn.signInDay == data[j]) {\n\t\t\t\t\tsignIn.isSignIn = true;\n\t\t\t\t\tsignIn.again_signIn = false;\n\t\t\t\t\tthis.multiDay++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!signIn.isSignIn && signIn.signInDay < nowDay) {\n\t\t\t\tsignIn.again_signIn = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t//设置累积宝箱领取数据\n\tpublic setTotalBoxesData(data: any): void {\n\t\tif (data == null || data.length == 0) {\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0; i < this.totalBoxesData.list.length; i++) {\n\t\t\tlet boxData = this.totalBoxesData.list[i];\n\t\t\tfor (let j = 0; j < data.length; j++) {\n\t\t\t\tif (boxData.totalSignInDay == data[j]) {\n\t\t\t\t\tboxData.isOpen = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//设置当前签到的数据\n\tpublic setNowSignInData(day: number): void {\n\t\tthis.signInData.list[day - 1].isSignIn = true;\n\t}\n\n\t//设置当前累积宝箱的数据\n\tpublic setNowBoxesData(day: number): void {\n\t\tfor (let i = 0; i < this.totalBoxesData.list.length; i++) {\n\t\t\tlet boxesData = this.totalBoxesData.list[i];\n\t\t\tif (boxesData.totalSignInDay == day) {\n\t\t\t\tboxesData.isOpen = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t//是否可以签到判断\n\tpublic getIsCanSignIn(day: number): boolean {\n\t\tlet nowTime = new Date();\n\t\tlet nowDay = nowTime.getDate();\n\t\tif (day == nowDay) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t//判断是否可以补签\n\tpublic getIsCanShowRepairSignIn(dayIndex: number): boolean {\n\t\tlet isCanRepair = true;\n\t\tfor (let i = 0; i < this.signInData.list.length; i++) {\n\t\t\tlet signInData = this.signInData.list[i];\n\t\t\tif (signInData.signInDay < dayIndex) {\n\t\t\t\tif (signInData.again_signIn) {\n\t\t\t\t\tisCanRepair = false;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn isCanRepair;\n\t}\n\n\t//判断是否可以打开\n\tpublic getIsCanOpenBoxes(dayIndex: number): boolean {\n\t\tlet isCanOpen = false;\n\t\tfor (let i = 0; i < this.totalBoxesData.list.length; i++) {\n\t\t\tlet boxData = this.totalBoxesData.list[i];\n\t\t\tif (boxData.totalSignInDay == dayIndex && boxData.totalSignInDay <= this.multiDay) {\n\t\t\t\tisCanOpen = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn isCanOpen;\n\t}\n}"]}