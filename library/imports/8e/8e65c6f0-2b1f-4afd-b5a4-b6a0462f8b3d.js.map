{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\dailyTask/assets\\modules\\plaza\\script\\dailyTask\\task.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\dailyTask","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport { dailyTask } from \"../../../../manager/public/interface/iDailyTaskInfo\";\n\n/*\nauthor: 陈斌杰\n日期:2018-11-23 11:40:29\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: TaskCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tpublic dailyTaskData: dailyTask = <dailyTask>{};\n\n\t//设置每日任务数据\n\tpublic setDailuTaskData(data: any): void {\n\t\tthis.dailyTaskData = data;\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\tico: ctrl.ico,\t\t\t\t\t\t\t\t\t\t\t\t//奖励图标\n\t\ttitle: ctrl.title,\t\t\t\t\t\t\t\t\t\t\t//任务标题\n\t\tcontent: ctrl.content,\t\t\t\t\t\t\t\t\t\t//任务内容\n\t\trewarks: ctrl.rewarks,\t\t\t\t\t\t\t\t\t\t//奖励挂载节点\n\t\trewark: ctrl.rewark,\t\t\t\t\t\t\t\t\t\t//奖励预制\n\t\tprogress_lab: ctrl.progress_lab,\t\t\t\t\t\t\t//任务进度\n\t\tprogressBtnLab: ctrl.progressBtnLab,\t\t\t\t\t\t\t\t//任务显示完成前往按钮\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.ui.progressBtnLab.string = \"前往\";\n\t}\n\n\t//初始化每日任务UI\n\tpublic initDailyTaskUI(): void {\n\t\tthis.ui.title.string = this.model.dailyTaskData.name;\n\t\tthis.ui.content.string = this.model.dailyTaskData.des;\n\t\tfor (let i = 0; i < this.model.dailyTaskData.rewarks.length; i++) {\n\t\t\tlet rewarkData = this.model.dailyTaskData.rewarks[i];\n\t\t\tlet rewarkNode = this.addPrefabNode(this.ui.rewark, this.ui.rewarks);\n\t\t\trewarkNode.setContentSize(65,65);\n\t\t\trewarkNode.x = 325 - i*80;\n\t\t\trewarkNode.getComponent(\"boxRewark\").initTotalRewark(rewarkData);\n\t\t}\n\t\tthis.ui.progress_lab.string = `进度${this.model.dailyTaskData.progress}/${this.model.dailyTaskData.parameter}`;\n\t\tif (this.model.dailyTaskData.received) {\n\t\t\tthis.ui.progressBtnLab.string = \"已领取\";\n\t\t\treturn;\n\t\t}\n\t\tif (this.model.dailyTaskData.progress == this.model.dailyTaskData.parameter) {\n\t\t\tthis.ui.progressBtnLab.string = \"完成\";\n\t\t}\n\t}\n}\n//c, 控制\n@ccclass\nexport default class TaskCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Sprite)\n\tico: cc.Sprite = null;\n\t@property(cc.Label)\n\ttitle: cc.Label = null;\n\t@property(cc.Label)\n\tcontent: cc.Label = null;\n\t@property(cc.Prefab)\n\trewark: cc.Prefab = null;\n\t@property(cc.Label)\n\tprogress_lab: cc.Label = null;\n\t@property(cc.Node)\n\trewarks: cc.Node = null;\n\t@property(cc.Label)\n\tprogressBtnLab: cc.Label = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t//初始化任务\n\tpublic initDailyTask(data: any): void {\n\t\tthis.model.setDailuTaskData(data);\n\t\tthis.view.initDailyTaskUI();\n\t}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}