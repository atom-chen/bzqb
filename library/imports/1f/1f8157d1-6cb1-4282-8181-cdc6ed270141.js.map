{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\modules\\public\\script/assets\\modules\\public\\script\\gainBox.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\modules\\public\\script","sourcesContent":["import BaseModel from \"../../../framework/baseClass/BaseModel\";\r\nimport BaseView from \"../../../framework/baseClass/BaseView\";\r\nimport BaseCtrl from \"../../../framework/baseClass/BaseCtrl\";\r\n\r\n/*\r\nauthor: 张志强\r\n日期:2018-11-12 13:45:57\r\n*/\r\n\r\ninterface Item {\r\n\ttype: number,\r\n\tamount: number\r\n}\r\n\r\n//MVC模块,\r\nconst { ccclass, property } = cc._decorator;\r\nlet ctrl: GainBoxCtrl;\r\n//模型，数据处理\r\nclass Model extends BaseModel {\r\n\tpublic itemList: Item[];\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic initData(arr: Item[]): void {\r\n\t\tthis.itemList = arr;\r\n\t}\r\n}\r\n//视图, 界面显示或动画，在这里完成\r\nclass View extends BaseView {\r\n\tprotected model: Model;\r\n\tprotected node: cc.Node;\r\n\tpublic ui = {\r\n\t\t//在这里声明ui\r\n\t\tcontent: ctrl.content,\r\n\t\tcloseBtn: ctrl.closeBtn\r\n\t}\r\n\tconstructor(model) {\r\n\t\tsuper(model);\r\n\t\tthis.node = ctrl.node;\r\n\t\tthis.initUi();\r\n\t}\r\n\t//初始化ui\r\n\tpublic initUi() {\r\n\t\tthis.addGrayLayer();\r\n\t}\r\n\t/**@todo 暂时显示文字，等资源到了替换为图标*/\r\n\tpublic refresh(): void {\r\n\t\tlet list = this.model.itemList;\r\n\t\tlet item = this.ui.content.children[0];\r\n\t\tlet words = [\"金币\", \"粉晶\", \"钻石\", \"特技\", \"宝箱\", \"碎片\", \"喇叭\"];\r\n\t\tfor (let i = 0; i < list.length; ++i) {\r\n\t\t\tlet curItem = i == 0 ? item : this.addPrefabNode(item, this.ui.content);\r\n\t\t\tlet data = list[i];\r\n\t\t\tcurItem.getComponent(cc.Label).string = `${words[data.type - 1]}X${data.amount}`;\r\n\t\t}\r\n\t}\r\n}\r\n//c, 控制\r\n@ccclass\r\nexport default class GainBoxCtrl extends BaseCtrl {\r\n\tprotected view: View;\r\n\tprotected model: Model;\r\n\t//这边去声明ui组件\r\n\t@property(cc.Node)\r\n\tcontent: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tcloseBtn: cc.Node = null;\r\n\t//声明ui组件end\r\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\r\n\tprivate _callback: Function;\r\n\tprotected onLoad(): void {\r\n\t\t// 控制器\r\n\t\tctrl = this;\r\n\t\t// 创建mvc模式中模型和视图\r\n\t\tthis.initMvc(Model, View);\r\n\t}\r\n\r\n\tpublic setGainData(arr: Item[], CB?: Function): void {\r\n\t\tthis.model.initData(arr);\r\n\t\tthis.view.refresh();\r\n\t\tthis._callback = CB ? CB : () => { };\r\n\t}\r\n\r\n\t//绑定操作的回调\r\n\tprotected connectUi(): void {\r\n\t\tthis.connect(\"click\", this.ui.closeBtn, this._closeBtnCB, \"关闭获得物品界面\");\r\n\t}\r\n\t//网络事件回调begin\r\n\t//end\r\n\t//全局事件回调begin\r\n\t//end\r\n\t//按钮或任何控件操作的回调begin\r\n\tprivate _closeBtnCB(): void {\r\n\t\tthis.remove();\r\n\t\tthis._callback();\r\n\t}\r\n\t//end\r\n\r\n\t// update(dt) {}\r\n\r\n\tprotected onDestroy(): void {\r\n\t\tsuper.onDestroy();\r\n\t}\r\n}"]}