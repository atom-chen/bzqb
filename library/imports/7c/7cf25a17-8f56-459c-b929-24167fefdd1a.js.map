{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\shop/assets\\modules\\plaza\\script\\shop\\crystalShop.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\shop","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport ModuleMgr from \"../../../../framework/modules/ModuleMgr\";\n/*\nauthor: 蒙磊\n日期:2018-11-13 20:41:57\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: CrystalShopCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\t//在这里声明ui\n\t\tlab_cost:ctrl.lab_cost,\n\t\tlab_gift:ctrl.lab_gift,\n\t\tlab_reward:ctrl.lab_reward,\n\t\tlab_name:ctrl.lab_name,\n\t\tbtn_crystal:ctrl.btn_crystal,\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.showLabelString(this.ui.lab_cost.getComponent(cc.Label),ctrl.cost.toString())\n\t\tthis.showLabelString(this.ui.lab_gift.getComponent(cc.Label),ctrl.gift.toString())\n\t\tthis.showLabelString(this.ui.lab_reward.getComponent(cc.Label),ctrl.reward.toString())\n\t\tthis.showLabelString(this.ui.lab_name.getComponent(cc.Label),ctrl.name)\n\t}\n\t//显示label内容\n\tshowLabelString(obj: cc.Label, content: string) {\n\t\tobj.string = content;\n\t}\n}\n//c, 控制\n@ccclass\nexport default class CrystalShopCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t//label\n\t@property(cc.Node)\n\tlab_cost: cc.Node = null;\n\t@property(cc.Node)\n\tlab_gift: cc.Node = null;\n\t@property(cc.Node)\n\tlab_reward: cc.Node = null;\n\t@property(cc.Node)\n\tlab_name: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_crystal: cc.Node = null;\n\t//button\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\tcost:number;\n\tgift:number;\n\treward:number;\n\tname:string;\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.ui.btn_crystal, this.buy, \"购买粉晶\");\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\tbuy() {\n\t\tModuleMgr.getInstance().showMsgBox({ content: `确定要花费${this.cost}购买：${this.name},获得${this.reward+this.gift}?` })\n\t}\n\tsetData(cost:number,gift:number,reward:number,name:string){\n\t\tthis.cost =cost?cost:0;\n\t\tthis.gift =gift?gift:0;\n\t\tthis.reward =reward?reward:0;\n\t\tthis.name =name;\n\t}\n\n\t// update(dt) {}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}