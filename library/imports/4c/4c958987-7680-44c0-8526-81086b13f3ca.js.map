{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\talent/assets\\modules\\plaza\\script\\talent\\talentBG.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\talent","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport TalentMgr from \"../../../../manager/public/talentMgr\";\nimport ModuleMgr from \"../../../../framework/modules/ModuleMgr\";\nimport GameNet from \"../../../../framework/modules/GameNet\";\nimport { enums } from \"../../../../manager/enums\";\n\n\n/*\nauthor: 蒙磊\n日期:2018-11-09 15:54:28\n*/\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: TalentCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\ttalentMgr = TalentMgr.getInstance();\n\ttalentPoint: number = this.talentMgr.talentPoint;\n\ttalentList = this.talentMgr.talentList;\n\trefreshNeedTime = null;\n\ttalentInfo = TalentMgr.getInstance().talentInfo;\n\tresetTime: string = null;\n\tserverDelay: number = null;\n\trefreshEndTime: number = null;\n\tconstructor() {\n\t\tsuper();\n\t}\n\tinitResetTime() {\n\t\tthis.serverDelay = GameNet.getInstance().getServerDelay();\n\t\tthis.refreshEndTime = this.talentMgr.lastResetTime + (enums.Talent_ResetTime * 1000);\n\t}\n\trefreshData() {\n\t\tthis.talentList = this.talentMgr.talentList;\n\t\tthis.talentPoint = this.talentMgr.talentPoint;\n\t}\n\tsetResetTime() {\n\t\tlet serverTime = Date.now() + this.serverDelay;\n\t\tthis.refreshNeedTime = this.refreshEndTime - serverTime;\n\t\tthis.refreshNeedTime = this.refreshNeedTime > 0 ? this.refreshNeedTime : -1;\n\t\tif (this.refreshNeedTime < 0) {\n\t\t\tthis.resetTime = \"可分享重置\"\n\t\t}\n\t\telse {\n\t\t\tlet hour = Math.floor((this.refreshNeedTime / 1000) / 3600) + 1\n\t\t\tthis.resetTime = hour + \"小时后重置\"\n\t\t}\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\t//在这里声明ui\n\t\tbtn_close: ctrl.btn_close,\n\t\tbtn_reset: ctrl.btn_reset,\n\t\tnote_resetTalent: ctrl.note_resetTalent,\n\t\tbtn_closeReset: ctrl.btn_closeReset,\n\t\tnote_talentList: ctrl.note_talentList,\n\t\tsuspensionFrame: ctrl.suspensionFrame,\n\t\tlab_talentPoint: ctrl.lab_talentPoint,\n\t\tbtn_buyReset: ctrl.btn_buyReset,\n\t\tbtn_share: ctrl.btn_share,\n\t\tlab_resetTime: ctrl.lab_resetTime,\n\n\t}\n\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\n\t}\n\t//显示label内容\n\tshowLabelString(obj: cc.Label, content: string) {\n\t\tobj.string = content;\n\t}\n\tshow(name) {\n\t\tthis.ui[name].active = true;\n\t}\n\thide(name) {\n\t\tthis.ui[name].active = false;\n\t}\n}\n//c, 控制\n@ccclass\nexport default class TalentCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t//btn\n\t@property(cc.Node)\n\tbtn_close: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_reset: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_closeReset: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_buyReset: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_share: cc.Node = null;\n\t//note\n\t@property(cc.Node)\n\tnote_resetTalent: cc.Node = null;\n\t@property(cc.Node)\n\tnote_talentList: cc.Node = null;\n\t//label\n\t@property(cc.Label)\n\tlab_talentPoint: cc.Label = null;\n\t@property(cc.Label)\n\tlab_resetTime: cc.Label = null;\n\t//Prefab\n\t@property(cc.Prefab)\n\tsuspensionFrame: cc.Prefab = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\tts_talentList: any = [];\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\tthis.note_resetTalent.childrenCount\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t\tthis.initData();\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {\n\t\t\t'plaza.talent.resetTalent': this.resetTalent,\n\t\t\t'plaza.talent.learnTalent': this.learnTalent,\n\t\t};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.ui.btn_close, this.close, \"关闭\");\n\t\tthis.connect(\"click\", this.ui.btn_reset, this.reset, \"打开重置天赋界面\");\n\t\tthis.connect(\"click\", this.ui.btn_buyReset, this.butReset, \"花钱重置重置天赋\");\n\t\tthis.connect(\"click\", this.ui.btn_share, this.share, \"分享重置重置天赋\");\n\t\tthis.connect(\"click\", this.ui.btn_closeReset, this.closeReset, \"关闭重置天赋\");\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\t//初始化\n\tinitData() {\n\t\tthis.model.initResetTime();\n\t\tthis.resetTiming();\n\t\tthis.schedule(this.resetTiming, 60)\n\t\tthis.view.showLabelString(this.ui.lab_resetTime, this.model.resetTime)\n\t\tthis.view.showLabelString(this.ui.lab_talentPoint, this.model.talentPoint.toString())\n\t\tfor (let i = 0; i < this.note_talentList.childrenCount; i++) {\n\t\t\tlet talent = this.note_talentList.children[i].addComponent(\"talent\")\n\t\t\ttalent.setSuspensionFrame(this.ui.suspensionFrame)\n\t\t\ttalent.setTalentData(this.model.talentList[i], i)\n\t\t\ttalent.addIcon(this.model.talentList[i].icon)\n\t\t\ttalent.refreshLevel()\n\t\t\tthis.ts_talentList.push(talent)\n\t\t}\n\t}\n\t//学习天赋回调\n\tlearnTalent() {\n\t\tthis.model.refreshData();\n\t\tconsole.log(this.model.talentPoint)\n\t\tthis.view.showLabelString(this.ui.lab_talentPoint, this.model.talentPoint.toString())\n\t\tlet curTalent = TalentMgr.getInstance().curTalent;\n\n\t\tif (curTalent) {\n\t\t\tcurTalent.updataTalentData(this.model.talentList[curTalent.model.index])\n\t\t\tcurTalent.refreshLevel();\n\t\t}\n\n\n\t}\n\t//重置天赋计时\n\tresetTiming() {\n\t\tthis.model.setResetTime();\n\t\tthis.view.showLabelString(this.ui.lab_resetTime, this.model.resetTime.toString())\n\t}\n\t//购买重置天赋提示\n\tbutReset() {\n\t\tModuleMgr.getInstance().showMsgBox({ content: \"是否花费200进行天赋重置？\", okcb: this.buyResetTalent })\n\t}\n\t//分享重置天赋按钮回调\n\tshare() {\n\t\tif (this.model.refreshNeedTime <= 0) {\n\t\t\tTalentMgr.getInstance().sendReqresetTalent(1);\n\t\t}\n\t\telse {\n\t\t\tconsole.log(\"重置时间未到\")\n\t\t}\n\t}\n\t//购买重置天赋\n\tbuyResetTalent() {\n\t\tTalentMgr.getInstance().sendReqresetTalent(2);\n\t}\n\t//重置天赋回调\n\tresetTalent() {\n\t\tthis.closeReset();\n\t\tthis.model.refreshData();\n\t\tthis.model.initResetTime();\n\t\tthis.model.setResetTime();\n\t\tthis.view.showLabelString(this.ui.lab_resetTime, this.model.resetTime.toString())\n\t\tthis.view.showLabelString(this.ui.lab_talentPoint, this.model.talentPoint.toString())\n\t\tfor (let i = 0; i < this.ts_talentList.length; i++) {\n\t\t\tthis.ts_talentList[i].refreshLevel();\n\t\t}\n\t}\n\t//打开重置天赋界面\n\treset() {\n\t\tthis.view.show('note_resetTalent')\n\t}\n\tcloseReset() {\n\t\tthis.view.hide('note_resetTalent')\n\t}\n\t// update(dt) {}\n\t//退出天赋\n\tclose() {\n\t\tthis.closeModule(\"talentBG\")\n\t}\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}