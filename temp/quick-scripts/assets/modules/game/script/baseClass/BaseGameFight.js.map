{"version":3,"sources":["BaseGameFight.ts"],"names":[],"mappings":";;;;;AACM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAE1C,IAAM,QAAQ,GAAG;IAChB,OAAO,EAAC,CAAC;IACT,QAAQ,EAAC,CAAC;CACV,CAAC;AACF;;;EAGE;AACF,MAAM;AAEN;IAA2C,iCAAY;IADvD;QAAA,qEA6DC;QA3DG,gBAAU,GAAO,EAAE,CAAC;QACpB,cAAQ,GAAU,CAAC,CAAC;;IA0DxB,CAAC;IAxDA,UAAU;IACV,iCAAS,GAAT;QACC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC;IACrC,CAAC;IAED,WAAW;IACX,0CAAkB,GAAlB;QACC,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC;IAC5C,CAAC;IAED,QAAQ;IACR,gCAAQ,GAAR;QACC,KAAI,IAAI,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAC;YACnC,IAAG;gBACF,IAAI,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;gBACpC,QAAO,GAAG,CAAC,MAAM,CAAC,EAAC;oBAClB,KAAK,QAAQ,CAAC,OAAO;wBACrB,IAAG,GAAG,CAAC,IAAI,IAAI,CAAC,EAAC;4BAChB,GAAG,CAAC,IAAI,EAAE,CAAC;4BACX,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;yBACtB;6BAAI;4BACJ,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC;yBACd;wBACD,MAAM;iBACN;aACD;YAAA,OAAM,CAAC,EAAC;gBACR,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,CAAC,CAAC,CAAC;aACzB;SACD;IACF,CAAC;IAED,eAAe;IACf,oCAAY,GAAZ,UAAa,WAAW,EAAC,QAAQ;QAChC,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAC1B,IAAI,GAAG,GAAG;YACT,IAAI,EAAC,WAAW;YAChB,IAAI,EAAC,QAAQ;YACb,IAAI,EAAC,QAAQ,CAAC,OAAO;SACrB,CAAA;QACD,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;QAC1B,OAAO,EAAE,CAAC;IACX,CAAC;IAGD,OAAO;IACP,8BAAM,GAAN,UAAO,EAAE;QACR,IAAG,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,EAAC;YACtB,IAAG;gBACF,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;gBAChC,OAAO,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;aAC3B;YAAA,OAAM,CAAC,EAAC;gBACR,OAAO,CAAC,GAAG,CAAC,SAAS,EAAC,CAAC,CAAC,CAAC;aACzB;SACD;IACF,CAAC;IA1DmB,aAAa;QADjC,OAAO;OACa,aAAa,CA4DjC;IAAD,oBAAC;CA5DD,AA4DC,CA5D0C,EAAE,CAAC,SAAS,GA4DtD;kBA5DoB,aAAa","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\game\\script\\baseClass","sourcesContent":["\nconst {ccclass, property} = cc._decorator;\n\nconst timeType = {\n\ttimeout:1,\n\tinterval:2,\n};\n/*\nauthor: 黄凯\n日期:2018-11-19\n*/\n// 帧等待\n@ccclass\nexport default class BaseGameFight extends cc.Component {\n    _frameList:any = {};\n    _frameId:number = 1;\n\n\t// 获取自增长id\n\tgetAndAdd():string{\n\t\treturn (this._frameId++).toString();\n\t}\n\n\t// 获取定时任务长度\n\tgetNowMissionCount():number{\n\t\treturn Object.keys(this._frameList).length;\n\t}\n\n\t// 启动定时器\n\tframeRun(){\n\t\tfor(var _frameId in this._frameList){\n\t\t\ttry{\n\t\t\t\tlet obj = this._frameList[_frameId];\n\t\t\t\tswitch(obj[\"type\"]){\n\t\t\t\t\tcase timeType.timeout:\n\t\t\t\t\tif(obj.time <= 0){\n\t\t\t\t\t\tobj.func();\n\t\t\t\t\t\tthis.remove(_frameId);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tobj.time -= 1;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tconsole.log(\"帧延迟系统错误\",e);\n\t\t\t}\n\t\t}\n\t}\n\n\t// 绑定timeout事件 \n\tframeTimeout(callbackFun,frameNum){\n\t\tvar id = this.getAndAdd();\n\t\tvar obj = {\n\t\t\tfunc:callbackFun,\n\t\t\ttime:frameNum,\n\t\t\ttype:timeType.timeout,\n\t\t}\n\t\tthis._frameList[id] = obj;\n\t\treturn id;\n\t}\n\n\t\n\t// 删除事件\n\tremove(id){\n\t\tif(this._frameList[id]){\n\t\t\ttry{\n\t\t\t\tthis._frameList[id].func = null;\n\t\t\t\tdelete this._frameList[id];\n\t\t\t}catch(e){\n\t\t\t\tconsole.log(\"帧延迟系统错误\",e);\n\t\t\t}\n\t\t}\n\t}\n\n}\n"]}