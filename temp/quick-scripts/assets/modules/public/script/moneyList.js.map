{"version":3,"sources":["moneyList.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\modules\\public\\script","sourcesContent":["import BaseModel from \"../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../framework/baseClass/BaseCtrl\";\nimport ShopMgr from \"../../../manager/public/shopMgr\";\nimport UserMgr from \"../../../manager/public/userMgr\";\n\n/*\nauthor: 蒙磊\n日期:2018-11-21 21:38:08\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: MoneyListCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\t//在这里声明ui\n\t\t//button\n\t\tbtn_moneyAdd: ctrl.btn_moneyAdd,\n\t\tbtn_diamondAdd: ctrl.btn_diamondAdd,\n\t\tbtn_crystalAdd: ctrl.btn_crystalAdd,\n\t\t//label\n\t\tlab_money: ctrl.lab_money,\n\t\tlab_crystal: ctrl.lab_crystal,\n\t\tlab_diamond: ctrl.lab_diamond,\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.updateMoney();\n\t}\n\tupdateMoney() {\n\t\tconsole.log(\"金钱变更！\", UserMgr.getInstance().userMoney.gold)\n\t\tthis.ui.lab_money.getComponent(cc.Label).string = this.numberEllipsis(UserMgr.getInstance().userMoney.gold)\n\t\tthis.ui.lab_crystal.getComponent(cc.Label).string = this.numberEllipsis(UserMgr.getInstance().userMoney.crystal)\n\t\tthis.ui.lab_diamond.getComponent(cc.Label).string = this.numberEllipsis(UserMgr.getInstance().userMoney.diamond)\n\t}\n}\n//c, 控制\n@ccclass\nexport default class MoneyListCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Node)\n\tbtn_moneyAdd: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_crystalAdd: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_diamondAdd: cc.Node = null;\n\t@property(cc.Node)\n\tlab_money: cc.Node = null;\n\t@property(cc.Node)\n\tlab_crystal: cc.Node = null;\n\t@property(cc.Node)\n\tlab_diamond: cc.Node = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t}\n\t\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {\n\t\t\t\"refreshMoneyUI\": this.refreshMoneyUI,\n\t\t};\n\t}\n\trefreshMoneyUI() {\n\t\tthis.view.updateMoney();\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tconsole.log(this.ui.btn_moneyAdd)\n\t\tthis.connect(\"click\", this.ui.btn_moneyAdd, () => {\n\t\t\tShopMgr.getInstance().setShopState(\"money\")\n\t\t\tif (ShopMgr.getInstance().isInitShop) {\n\t\t\t\tthis.openSubModule(\"shop\")\n\t\t\t}\n\t\t\telse {\n\t\t\t\tShopMgr.getInstance().reqShopInfo();\n\t\t\t}\n\t\t}, \"购买金币\");\n\t\tthis.connect(\"click\", this.ui.btn_crystalAdd, () => {\n\t\t\tShopMgr.getInstance().setShopState(\"crystal\")\n\t\t\tif (ShopMgr.getInstance().isInitShop) {\n\t\t\t\tthis.openSubModule(\"shop\")\n\t\t\t}\n\t\t\telse {\n\t\t\t\tShopMgr.getInstance().reqShopInfo();\n\t\t\t}\n\t\t}, \"购买水晶\");\n\t\tthis.connect(\"click\", this.ui.btn_diamondAdd, () => {\n\t\t\tShopMgr.getInstance().setShopState(\"diamond\")\n\t\t\tif (ShopMgr.getInstance().isInitShop) {\n\t\t\t\tthis.openSubModule(\"shop\")\n\t\t\t}\n\t\t\telse {\n\t\t\t\tShopMgr.getInstance().reqShopInfo();\n\t\t\t}\n\t\t}, \"购买砖石\");\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t// update(dt) {}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}