{"version":3,"sources":["loginPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\modules\\login\\script","sourcesContent":["import BaseModel from \"../../../framework/baseClass/BaseModel\";\r\nimport BaseView from \"../../../framework/baseClass/BaseView\";\r\nimport BaseCtrl from \"../../../framework/baseClass/BaseCtrl\";\r\nimport LoginMgr from \"../../../manager/public/loginMgr\";\r\n\r\n/*\r\nauthor: 张志强\r\n日期:2018-11-05 10:37:04\r\n*/\r\n\r\n//MVC模块,\r\nconst { ccclass, property } = cc._decorator;\r\nlet ctrl: LoginPanelCtrl;\r\n//模型，数据处理\r\nclass Model extends BaseModel {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n}\r\n//视图, 界面显示或动画，在这里完成\r\nclass View extends BaseView {\r\n\tprotected model: Model;\r\n\tprotected node: cc.Node;\r\n\tpublic ui = {\r\n\t\t//在这里声明ui\r\n\t\ttestBtnPanel: ctrl.testBtnPanel,\r\n\t\ttouristBtn: ctrl.touristBtn,\r\n\t\taccountBtn: ctrl.accountBtn,\r\n\t\tregisterBtn: ctrl.registerBtn,\r\n\t\twechatBtn: ctrl.wechatBtn,\r\n\t\tQQBtn: ctrl.QQBtn,\r\n\t\taccount: ctrl.account,\r\n\t\tpassword: ctrl.password,\r\n\t}\r\n\tconstructor(model) {\r\n\t\tsuper(model);\r\n\t\tthis.node = ctrl.node;\r\n\t\tthis.initUi();\r\n\t}\r\n\t//初始化ui\r\n\tpublic initUi() {\r\n\r\n\t}\r\n}\r\n//c, 控制\r\n@ccclass\r\nexport default class LoginPanelCtrl extends BaseCtrl {\r\n\tprotected view: View;\r\n\tprotected model: Model;\r\n\t//这边去声明ui组件\r\n\t@property(cc.Node)\r\n\ttestBtnPanel: cc.Node = null;\r\n\t@property(cc.Node)\r\n\ttouristBtn: cc.Node = null;\r\n\t@property(cc.Node)\r\n\taccountBtn: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tregisterBtn: cc.Node = null;\r\n\t@property(cc.Node)\r\n\twechatBtn: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tQQBtn: cc.Node = null;\r\n\t@property(cc.EditBox)\r\n\taccount: cc.EditBox = null;\r\n\t@property(cc.EditBox)\r\n\tpassword: cc.EditBox = null;\r\n\t//声明ui组件end\r\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\r\n\tonLoad() {\r\n\t\t// 控制器\r\n\t\tctrl = this;\r\n\t\t// 创建mvc模式中模型和视图\r\n\t\tthis.initMvc(Model, View);\r\n\t}\r\n\r\n\t//定义网络事件\r\n\tprotected defineNetEvents() {\r\n\t\tthis.n_events = {};\r\n\t}\r\n\t//定义全局事件\r\n\tprotected defineGlobalEvents() {\r\n\t\tthis.g_events = {\r\n\t\t\t\"goToCreateRole\": this.goToCreateRole,\r\n\t\t};\r\n\t}\r\n\t//绑定操作的回调\r\n\tconnectUi() {\r\n\t\tthis.connect(\"click\", this.ui.touristBtn, this.touristLogin, \"点击游客登录\");\r\n\t\tthis.connect(\"click\", this.ui.accountBtn, this.accountBtnCB, \"点击账号登录\");\r\n\t\tthis.connect(\"click\", this.ui.registerBtn, this.registerBtnCB, \"点击注册账号\");\r\n\t\tthis.connect(\"click\", this.ui.wechatBtn, this.wechatBtnCB, \"点击微信登录\")\r\n\t\tfor (let i = 0; i < this.ui.testBtnPanel.childrenCount; ++i) {\r\n\t\t\tthis.connect(\"click\", this.ui.testBtnPanel.children[i], () => {\r\n\t\t\t\tlet str = `${1000 + i}`;\r\n\t\t\t\tthis.login(str, str);\r\n\t\t\t\t// this.register(str, str);\r\n\t\t\t}, `点击测试账号按钮${i + 1}`);\r\n\t\t}\r\n\t}\r\n\t//网络事件回调begin\r\n\t//end\r\n\t//全局事件回调begin\r\n\t//创建角色处理\r\n\tpublic goToCreateRole(num): void {\r\n\t\tthis.remove();\r\n\t}\r\n\t//end\r\n\t//按钮或任何控件操作的回调begin\r\n\tpublic touristLogin() {\r\n\t\tplatSdk.touristLogin({\r\n\t\t\tsuccess: data => {\r\n\t\t\t\tLoginMgr.getInstance().login(data.head);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic accountBtnCB() {\r\n\t\tthis.login(this.ui.account.string, this.ui.password.string);\r\n\t}\r\n\r\n\tpublic registerBtnCB() {\r\n\t\tthis.register(this.ui.account.string, this.ui.password.string);\r\n\t}\r\n\r\n\tpublic wechatBtnCB() {\r\n\r\n\t}\r\n\t//end\r\n\tpublic login(username: string, password: string) {\r\n\t\tplatSdk.login({\r\n\t\t\tdata: {\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password\r\n\t\t\t},\r\n\t\t\tsuccess: data => {\r\n\t\t\t\tLoginMgr.getInstance().login(data.head);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic register(username: string, password: string) {\r\n\t\tplatSdk.register({\r\n\t\t\tdata: {\r\n\t\t\t\tusername: username,\r\n\t\t\t\tpassword: password\r\n\t\t\t},\r\n\t\t\tsuccess: data => {\r\n\t\t\t\tLoginMgr.getInstance().login(data.head);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// update(dt) {}\r\n\r\n\tonDestroy() {\r\n\t\tsuper.onDestroy();\r\n\t}\r\n}"]}