{"version":3,"sources":["mails.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\mails","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport { mailsData, mail } from \"../../../../manager/public/interface/iMailInfo\";\nimport MailMgr from \"../../../../manager/public/mailMgr\";\nimport UserMgr from \"../../../../manager/public/userMgr\";\nimport { enums } from \"../../../../manager/enums\";\n\n/*\nauthor: 陈斌杰\n日期:2018-11-09 15:52:05\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: MailsCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tpublic user: any = UserMgr.getInstance().user;\n\tpublic mailsData: mailsData = MailMgr.getInstance().mailsData;\n\tpublic mailExplain: mail = <mail>{};\t\t\t//当前显示的邮件详情的邮件数据\n\tpublic boxesRewarkData: any = [];\t\t\t\t//宝箱数据\n\n\t//设置邮件详情数据\n\tpublic setMailExplainData(id: number): void {\n\t\tfor (let i = 0; i < this.mailsData.list.length; i++) {\n\t\t\tlet mailData = this.mailsData.list[i];\n\t\t\tif (mailData.id == id) {\n\t\t\t\tthis.mailExplain = mailData;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t//处理宝箱数据\n\tpublic setBoxesRewarkData(): void {\n\t\tlet boxesData = MailMgr.getInstance().boxesRewark;\n\t\tfor (let i = 0; i < boxesData.length; i++) {\n\t\t\tlet data = boxesData[i];\t//宝箱数据\n\t\t\tlet arr = [];\n\t\t\tlet item: any = {};\n\t\t\titem.type = enums.Get_Gold;\n\t\t\titem.amount = data.addMoneyGold;\n\t\t\tarr.push(item);\n\t\t\tfor (let j = 0; j < data.listTejis.length; j++) {\n\t\t\t\tlet effectData = data.listTejis[j];\n\t\t\t\tlet effectItem: any = {};\n\t\t\t\teffectItem.type = enums.Get_Skill;\n\t\t\t\teffectItem.amount = effectData.amount;\n\t\t\t\tarr.push(effectItem);\n\t\t\t}\n\t\t\tthis.boxesRewarkData.push(arr);\n\t\t}\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\tbtn_close: ctrl.btn_close,\n\t\tmailsList: ctrl.mailsList,\t\t\t\t\t\t\t\t\t\t\t\t//邮件列表 \n\t\tmail: ctrl.mail,\t\t\t\t\t\t\t\t\t\t\t\t\t\t//邮件预制\n\t\tmailsExplain_title: ctrl.mailsExplain_title,\t\t\t\t\t\t\t//邮件详情标题\n\t\tmailsExplain_name: ctrl.mailsExplain_name,\t\t\t\t\t\t\t\t//邮件详情姓名\n\t\tmailsExplain_content: ctrl.mailsExplain_content,\t\t\t\t\t\t//邮件详情内容\n\t\tmailsCount: ctrl.mailsCount,\t\t\t\t\t\t\t\t\t\t\t//邮件数量\n\t\tmailRewark: ctrl.mailRewark,\t\t\t\t\t\t\t\t\t\t\t//邮件奖励\n\t\tbtn_receive: ctrl.rewarkFrame.getChildByName(\"btn_receive\"),\t\t\t//领取按钮\n\t\tbtn_del: ctrl.rewarkFrame.getChildByName(\"btn_del\"),\t\t\t\t\t//删除按钮\n\t\trewarks: ctrl.rewarkFrame.getChildByName(\"rewarks\"),\t\t\t\t\t//奖励挂载节点\n\t\tbtn_allReceive: ctrl.btn_allReceive,\t\t\t\t\t\t\t\t\t//全部领取按钮\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.ui.mailsList.height = 7500;\n\t\tthis.initMailsList();\n\t\tthis.ui.mailsExplain_title.string = \"\";\n\t\tthis.ui.mailsExplain_name.string = \"\";\n\t\tthis.ui.mailsExplain_content.string = \"\";\n\t\tthis.ui.mailsCount.string = `${MailMgr.getInstance().mailCount}/100`;\n\t\tthis.ui.btn_receive.active = false;\n\t\tthis.ui.btn_del.active = false;\n\t}\n\n\t//初始化邮件列表\n\tpublic initMailsList(): void {\n\t\tif (this.ui.mailsList.childrenCount > 0) {\n\t\t\tthis.ui.mailsList.destroyAllChildren();\n\t\t}\n\t\tfor (let i = 0; i < this.model.mailsData.list.length; i++) {\n\t\t\tlet mailData = this.model.mailsData.list[i];\n\t\t\tlet mailNode = this.addPrefabNode(this.ui.mail, this.ui.mailsList);\n\t\t\tmailNode.y = -75 * i - 35;\n\t\t\tmailNode.getComponent(\"mail\").initMailData(mailData);\n\t\t}\n\t}\n\n\t//刷新邮件详情显示\n\tpublic refreshMailExplainUI(): void {\n\t\tthis.delMailRewark();\n\t\tthis.ui.mailsExplain_title.string = \"邮件详情\";\n\t\tthis.ui.mailsExplain_name.string = `亲爱的${this.model.user.userName}:`;\n\t\tthis.ui.mailsExplain_content.string = this.model.mailExplain.content;\n\t\tthis.refreshMailIco();\n\t\tthis.refreshMailBgColor();\n\t\tthis.refreshMailRewarksUI();\n\t}\n\n\t//当前邮件ico刷新  未读取变成已读取\n\tpublic refreshMailIco(): void {\n\t\tfor (let i = 0; i < this.ui.mailsList.childrenCount; i++) {\n\t\t\tlet mailNode = this.ui.mailsList.children[i];\n\t\t\tlet id = mailNode.getComponent(\"mail\").model.mailData.id;\n\t\t\tif (id == this.model.mailExplain.id) {\n\t\t\t\tmailNode.getComponent(\"mail\").refreshMailState();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t//刷新全部邮件Ico  未读取变成已读取\n\tpublic refreshAllMailIco(): void {\n\t\tfor (let i = 0; i < this.ui.mailsList.childrenCount; i++) {\n\t\t\tlet mailNode = this.ui.mailsList.children[i];\n\t\t\tmailNode.getComponent(\"mail\").refreshMailState();\n\t\t}\n\t}\n\n\t//刷新邮件奖励显示\n\tpublic refreshMailRewarksUI(): void {\n\t\tthis.ui.btn_receive.active = false;\n\t\tthis.ui.btn_del.active = false;\n\t\tlet row = 0;\n\t\tlet column = 0;\n\t\tif (this.model.mailExplain.bRec || this.model.mailExplain.reward.length == 0) {\n\t\t\tthis.ui.btn_del.active = true;\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0; i < this.model.mailExplain.reward.length; i++) {\n\t\t\tlet rewarkData = this.model.mailExplain.reward[i];\n\t\t\tlet rewarkNode = this.addPrefabNode(this.ui.mailRewark, this.ui.rewarks);\n\t\t\trow = i % 5;\n\t\t\tif (i != 0 && i % 5 == 0) {\n\t\t\t\tcolumn++;\n\t\t\t}\n\t\t\trewarkNode.x = -165 + 85 * row;\n\t\t\trewarkNode.y = -85 * column;\n\t\t\trewarkNode.getComponent(\"mailRewark\").initMailRewark(rewarkData);\n\t\t}\n\t\tthis.ui.btn_receive.active = !this.model.mailExplain.bRec;\n\t\tthis.ui.btn_del.active = this.model.mailExplain.bRec;\n\t}\n\n\t//刷新点击邮件背景颜色   选择的邮件背景变黄色\n\tpublic refreshMailBgColor(): void {\n\t\tfor (let i = 0; i < this.model.mailsData.list.length; i++) {\n\t\t\tlet mailData = this.model.mailsData.list[i];\n\t\t\tif (!mailData.id) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (mailData.id == this.model.mailExplain.id) {\n\t\t\t\tthis.ui.mailsList.children[i].getChildByName(\"frameBg\").color = cc.color(243, 255, 183);\n\t\t\t} else {\n\t\t\t\tthis.ui.mailsList.children[i].getChildByName(\"frameBg\").color = cc.color(255, 255, 255);\n\t\t\t}\n\t\t}\n\t}\n\n\t//领取邮件奖励\n\tpublic bRecMailRewark(): void {\n\t\tthis.delMailRewark();\n\t\tthis.ui.btn_receive.active = !this.model.mailExplain.bRec;\n\t\tthis.ui.btn_del.active = this.model.mailExplain.bRec;\n\t}\n\n\t//删除邮件奖励\n\tpublic delMailRewark(): void {\n\t\tif (this.ui.rewarks.childrenCount == 0) {\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0; i < this.ui.rewarks.childrenCount; i++) {\n\t\t\tlet rewarkNode = this.ui.rewarks.children[i];\n\t\t\tif (rewarkNode) {\n\t\t\t\trewarkNode.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\t//领取有奖宝箱处理\n\tpublic showBoxes(): void {\n\t\tlet index = 0;\n\n\t\tlet fun = () => {\n\t\t\tlet data = this.model.boxesRewarkData[++index];\n\t\t\tif (data) ctrl.showBoxesRewark(data, fun);\n\t\t}\n\t\tctrl.showBoxesRewark(this.model.boxesRewarkData[index], fun);\n\t}\n}\n//c, 控制\n@ccclass\nexport default class MailsCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Node)\n\tbtn_close: cc.Node = null;\n\t@property(cc.Node)\n\tmailsList: cc.Node = null;\n\t@property(cc.Prefab)\n\tmail: cc.Prefab = null;\n\t@property(cc.Label)\n\tmailsExplain_title: cc.Label = null;\n\t@property(cc.Label)\n\tmailsExplain_name: cc.Label = null;\n\t@property(cc.Label)\n\tmailsExplain_content: cc.Label = null;\n\t@property(cc.Label)\n\tmailsCount: cc.Label = null;\n\t@property(cc.Prefab)\n\tmailRewark: cc.Prefab = null;\n\t@property(cc.Node)\n\trewarkFrame: cc.Node = null;\n\t@property(cc.Button)\n\tbtn_allReceive: cc.Button = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {\n\t\t\t\"plaza.mail.recMail\": this.recMail,\n\t\t\t\"plaza.mail.delMail\": this.delMail,\n\t\t};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {\n\t\t\t\"refreshMailExplain\": this.refreshMailExplain,\n\t\t};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.ui.btn_close, () => {\n\t\t\tthis.closeModule(\"mails\");\n\t\t}, \"关闭邮箱界面\");\n\t\tthis.connect(\"click\", this.ui.btn_receive, () => {\n\t\t\tlet idList = [];\n\t\t\tidList.push(this.model.mailExplain.id);\n\t\t\tMailMgr.getInstance().sendReqMailRewark(idList);\n\t\t}, `领取邮件奖励${this.model.mailExplain.id}`);\n\t\tthis.connect(\"click\", this.ui.btn_allReceive, () => {\n\t\t\tlet list = MailMgr.getInstance().getAllMailId();\n\t\t\tMailMgr.getInstance().sendReqMailRewark(list);\n\t\t}, `领取全部邮件奖励${this.model.mailExplain.id}`);\n\t\tthis.connect(\"click\", this.ui.btn_del, () => {\n\t\t\tlet idList = [];\n\t\t\tidList.push(this.model.mailExplain.id);\n\t\t\tMailMgr.getInstance().sendReqMailDel(idList);\n\t\t}, `删除邮件${this.model.mailExplain.id}`);\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t//刷新邮件详细内容显示\n\tpublic refreshMailExplain(mailId: number): void {\n\t\tthis.model.setMailExplainData(mailId);\n\t\tthis.view.refreshMailExplainUI();\n\t}\n\n\t//领取邮件  \n\tpublic recMail(): void {\n\t\tif (MailMgr.getInstance().isAllMailRecRewark) {\t\t\t\t\t//全部领取\n\t\t\t//刷新全部邮件的ico  显示已读取状态\n\t\t\tthis.view.refreshAllMailIco();\n\t\t\tif (this.model.mailExplain.id != null) {\t//有显示当前邮件详情\n\t\t\t\t//清除奖励数据，领取按钮变为删除按钮\n\t\t\t\tthis.model.setMailExplainData(this.model.mailExplain.id);\n\t\t\t\tthis.view.bRecMailRewark();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.model.setMailExplainData(this.model.mailExplain.id);\t//单个邮件领取\n\t\t\tthis.view.bRecMailRewark();\n\t\t}\n\t\t//宝箱处理\n\t\tif (MailMgr.getInstance().boxesRewark != null) {\n\t\t\tthis.model.setBoxesRewarkData();\n\t\t\tthis.view.showBoxes();\n\t\t}\n\t}\n\n\t//删除邮件\n\tpublic delMail(): void {\n\t\tthis.model.mailExplain = <mail>{};\n\t\tthis.view.initUi();\n\t}\n\n\t//显示宝箱奖励界面\n\tpublic showBoxesRewark(arr: any, CB: Function): void {\n\t\tthis.openSubModule(\"gainBox\", true).then(script => {\n\t\t\tscript.setGainData(arr, CB);\n\t\t});\n\t}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}