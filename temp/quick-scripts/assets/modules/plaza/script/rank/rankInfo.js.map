{"version":3,"sources":["rankInfo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\rank","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\r\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\r\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\r\nimport RankMgr from \"../../../../manager/public/rankMgr\";\r\nimport TableMgr from \"../../../../manager/public/tableMgr\";\r\n\r\n/*\r\nauthor: 陈斌杰\r\n日期:2018-11-09 15:25:39\r\n*/\r\n\r\n//MVC模块,\r\nconst { ccclass, property } = cc._decorator;\r\nlet ctrl: RankInfoCtrl;\r\n//模型，数据处理\r\nclass Model extends BaseModel {\r\n    myRankInfo = null;\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n}\r\n//视图, 界面显示或动画，在这里完成\r\nclass View extends BaseView {\r\n\tprotected model: Model;\r\n\tprotected node: cc.Node;\r\n\tpublic ui={\r\n\t\tspr_rank: ctrl.spr_rank,\r\n\t\tspr_head: ctrl.spr_head,\r\n\t\tspr_kingIco: ctrl.spr_kingIco,\r\n\t\tspr_LevelIco: ctrl.spr_LevelIco,\r\n\t\tlbl_playerName: ctrl.lbl_playerName,\r\n\t\tlbl_guildName: ctrl.lbl_guildName,\r\n\t\tlbl_stageName: ctrl.lbl_stageName,\r\n\t\tlbl_startCount: ctrl.lbl_startCount,\r\n\t}\r\n\tconstructor(model){\r\n\t\tsuper(model);\r\n\t\tthis.node = ctrl.node;\r\n\t\tthis.initUi();\r\n\t}\r\n\t//初始化ui\r\n\tpublic initUi() {\r\n\r\n\t}\r\n\trefreshMyRankInfo()\r\n\t{\r\n\t\tconsole.log('refreshMyRankInfo',this.model.myRankInfo)\r\n\t\tif(this.model.myRankInfo) {\r\n\t\t\tthis.ui.lbl_playerName.string = this.model.myRankInfo.nickname;\r\n\t\t\tthis.ui.lbl_guildName.string = this.model.myRankInfo.guildName;\r\n\t    \tlet card =TableMgr.getInstance().search('duanwei_duanwei',{stage:this.model.myRankInfo.stageIndex});\r\n\t\t\tthis.ui.lbl_stageName.string = card.name;\r\n\t\t\tthis.ui.lbl_startCount.string = this.model.myRankInfo.stageScore;\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n//c, 控制\r\n@ccclass\r\nexport default class RankInfoCtrl extends BaseCtrl {\r\n\tprotected view: View;\r\n\tprotected model: Model;\r\n\t//这边去声明ui组件\r\n\t@property(cc.Sprite)\r\n\tspr_rank: cc.Sprite = null;\r\n\t@property(cc.Sprite)\r\n\tspr_head: cc.Sprite = null;\r\n\t@property(cc.Sprite)\r\n\tspr_kingIco: cc.Sprite = null;\r\n\t@property(cc.Sprite)\r\n\tspr_LevelIco: cc.Sprite = null;\r\n\t@property(cc.Label)\r\n\tlbl_playerName: cc.Label = null;\r\n\t@property(cc.Label)\r\n\tlbl_guildName: cc.Label = null;\r\n\t@property(cc.Label)\r\n\tlbl_stageName: cc.Label = null;\r\n\t@property(cc.Label)\r\n\tlbl_startCount: cc.Label = null;\r\n\t//声明ui组件end\r\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\r\n\r\n\r\n\tonLoad (){\r\n\t\t// 控制器\r\n\t\tctrl = this;\r\n\t\t// 创建mvc模式中模型和视图\r\n\t\tthis.initMvc(Model,View);\r\n\t}\r\n\r\n\t//定义网络事件\r\n\tprotected defineNetEvents() {\r\n\t \tthis.n_events = {\r\n            'search.entry.reqMyRankInfo': this.search_entry_reqMyRankInfo,\r\n        };\r\n\t}\r\n\t//定义全局事件\r\n\tprotected defineGlobalEvents() {\r\n\t\tthis.g_events = {};\r\n\t}\r\n\t//绑定操作的回调\r\n\tconnectUi() {\r\n\t}\r\n\tsearch_entry_reqMyRankInfo()\r\n\t{\r\n\r\n\t}\r\n\tupdateAndRefreshMyRankInfo(data)\r\n\t{\r\n\t\tthis.model.myRankInfo = data;\r\n\t\tthis.view.refreshMyRankInfo();\r\n\t}\r\n\t//网络事件回调begin\r\n\t//end\r\n\t//全局事件回调begin\r\n\t//end\r\n\t//按钮或任何控件操作的回调begin\r\n\t//end\r\n\tonDestroy() {\r\n\t\tsuper.onDestroy();\r\n\t}\r\n}"]}