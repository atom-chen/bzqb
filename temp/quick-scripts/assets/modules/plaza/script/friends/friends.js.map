{"version":3,"sources":["friends.ts"],"names":[],"mappings":";;;;;AAAA,uEAAkE;AAClE,qEAAgE;AAChE,qEAAgE;AAGhE,oEAA8D;AAE9D,6DAA4D;AAE5D;;;EAGE;AAEF,QAAQ;AACF,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAC5C,IAAI,IAAiB,CAAC;AACtB,SAAS;AACT;IAAoB,yBAAS;IAK5B;QAAA,YACC,iBAAO,SASP;QAdM,iBAAW,GAA2B,EAAE,CAAA;QAsBxC,gBAAU,GAAW,CAAC,CAAA;QAf5B,KAAI,CAAC,WAAW,CAAC,UAAU,GAAG,oBAAU,CAAC,WAAW,EAAE,CAAC,eAAe,CAAA;QACtE,KAAI,CAAC,WAAW,CAAC,cAAc,GAAG,CAAC,CAAA;QACnC,IAAG,KAAI,CAAC,WAAW,CAAC,UAAU,EAAC;YAC9B,KAAI,CAAC,WAAW,CAAC,UAAU,GAAG,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAA;SAChE;aAAI;YACJ,KAAI,CAAC,WAAW,CAAC,UAAU,GAAG,CAAC,CAAA;SAC/B;;IACF,CAAC;IAEM,0BAAU,GAAjB;QACC,IAAI,CAAC,WAAW,CAAC,UAAU,GAAG,oBAAU,CAAC,WAAW,EAAE,CAAC,eAAe,CAAA;QACtE,IAAI,CAAC,WAAW,CAAC,cAAc,GAAG,CAAC,CAAA;QACnC,IAAI,CAAC,WAAW,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAA;IACjE,CAAC;IAGF,YAAC;AAAD,CAxBA,AAwBC,CAxBmB,mBAAS,GAwB5B;AACD,mBAAmB;AACnB;IAAmB,wBAAQ;IAkC1B,cAAY,KAAK;QAAjB,YACC,kBAAM,KAAK,CAAC,SAGZ;QAnCM,QAAE,GAAC;YACT,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,SAAS,EAAE,IAAI,CAAC,eAAe;YAC/B,UAAU,EAAE,IAAI,CAAC,aAAa;YAC9B,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,SAAS,EAAE,IAAI,CAAC,SAAS;YAEzB,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,gBAAgB,EAAE,IAAI,CAAC,gBAAgB;YAEvC,mBAAmB,EAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,WAAW,CAAC;YAClE,aAAa,EAAE,IAAI,CAAC,aAAa;YAEjC,eAAe,EAAC,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC;YACjF,QAAQ,EAAC,IAAI,CAAC,WAAW;YACzB,QAAQ,EAAC,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC;YAEnD,MAAM;YACN,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,mBAAmB,EAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,WAAW,CAAC;YAClE,UAAU,EAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,YAAY,CAAC;YAC1D,UAAU,EAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC;YACtF,OAAO,EAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,OAAO,CAAC;YAClD,iBAAiB,EAAC,IAAI,CAAC,iBAAiB;YACxC,SAAS,EAAC,IAAI,CAAC,eAAe;YAC9B,UAAU,EAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,aAAa,CAAC;SAC3D,CAAA;QAIA,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,KAAI,CAAC,MAAM,EAAE,CAAC;;IACf,CAAC;IAED,OAAO;IACA,qBAAM,GAAb;QACC,IAAI,CAAC,oBAAoB,EAAE,CAAA;QAC3B,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAA;QAChC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAA;QACjC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,KAAK,CAAA;QACpC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,KAAK,CAAA;IACrC,CAAC;IAEM,mCAAoB,GAA3B;QACC,QAAQ;QACR,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,GAAG,+BAAS,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,SAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,cAAgB,CAAA;QAChH,QAAQ;QACR,IAAI,CAAC,gBAAgB,EAAE,CAAA;IACxB,CAAC;IAED,QAAQ;IACD,+BAAgB,GAAvB;QACC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,EAAE,CAAA;QACvC,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE;YAClD,IAAG,OAAO,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,QAAQ,EAAC;gBAC5D,IAAI,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;gBACxE,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAA;aACxF;SACD;IACF,CAAC;IAED,YAAY;IACL,gCAAiB,GAAxB,UAAyB,KAAK;QAC7B,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,KAAK,CAAA;IACrC,CAAC;IAED,YAAY;IACL,mCAAoB,GAA3B,UAA4B,KAAK;IAEjC,CAAC;IAED,WAAW;IACJ,gCAAiB,GAAxB,UAAyB,KAAK;QAC7B,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,KAAK,CAAA;IACrC,CAAC;IAED,QAAQ;IACD,2BAAY,GAAnB,UAAoB,GAAG;QACtB,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAA;QACjC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAA;QACrC,UAAU;IACX,CAAC;IAED,aAAa;IACN,8BAAe,GAAtB;QACC,OAAQ,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,CAAA;IAC3D,CAAC;IAEM,6BAAc,GAArB;QACC,OAAO,IAAI,CAAC,EAAE,CAAC,eAAe,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,CAAA;IAC/D,CAAC;IAEM,+BAAgB,GAAvB;QACC,IAAI,CAAC,EAAE,CAAC,eAAe,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,EAAE,CAAA;IAC7D,CAAC;IAEM,iCAAkB,GAAzB;QACC,IAAI,CAAC,EAAE,CAAC,iBAAiB,CAAC,kBAAkB,EAAE,CAAA;IAC/C,CAAC;IAEM,+BAAgB,GAAvB,UAAwB,QAAQ;QAC/B,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC;QACjF,SAAS,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;IACvD,CAAC;IAEM,+BAAgB,GAAvB,UAAwB,IAAQ;QAC/B,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAA;IACrD,CAAC;IAGM,gCAAiB,GAAxB,UAAyB,GAAG;QAC3B,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC,EAAE,EAAC;YACxD,IAAI,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;YAC3C,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,WAAW,EAAE,IAAI,GAAG,CAAC,CAAA;SAC1F;IACF,CAAC;IAEM,gCAAiB,GAAxB,UAAyB,GAAG;QAC3B,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAA;QACjC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAA;QAEhC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAA;QACrC,IAAI,aAAa,GAAG,oBAAU,CAAC,WAAW,EAAE,CAAC,WAAW,CAAA;QAExD,IAAG,aAAa,CAAC,IAAI,IAAI,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,EAAC;YAChD,IAAI,SAAS,GAAG,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,MAAM,CAAA;YAC1D,IAAI,WAAW,GAAG,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,WAAW,CAAA;YAErD,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,EAAC;gBACjC,IAAI,QAAQ,GAAG,WAAW,CAAC,CAAC,CAAC,CAAA;gBAC7B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAA;aAC1B;SACD;IACF,CAAC;IAEM,oCAAqB,GAA5B,UAA6B,WAAW;QACvC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAA;IAC9B,CAAC;IAEO,0BAAW,GAAnB,UAAoB,IAAI;QACvB,IAAI,QAAQ,CAAA;QACZ,IAAG,IAAI,CAAC,MAAM,IAAI,oBAAU,CAAC,WAAW,EAAE,CAAC,IAAI,EAAC;YAC/C,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;SACnE;aAAI;YACJ,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;SAClE;QAED,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,oBAAU,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAA;IAClG,CAAC;IAEM,6BAAc,GAArB,UAAsB,GAAG;IAEzB,CAAC;IACF,WAAC;AAAD,CA/JA,AA+JC,CA/JkB,kBAAQ,GA+J1B;AACD,OAAO;AAEP;IAAyC,+BAAQ;IADjD;QAAA,qEAsLC;QAlLA,WAAW;QAEX,eAAS,GAAc,IAAI,CAAC;QAE5B,qBAAe,GAAa,IAAI,CAAC;QAEjC,YAAM,GAAc,IAAI,CAAC;QAEzB,mBAAa,GAAY,IAAI,CAAC;QAE9B,sBAAgB,GAAc,IAAI,CAAC;QAEnC,mBAAa,GAAc,IAAI,CAAC;QAEhC,gBAAU,GAAY,IAAI,CAAC;QAE3B,gBAAU,GAAY,IAAI,CAAC;QAE3B,iBAAW,GAAY,IAAI,CAAC;QAG5B,cAAQ,GAAc,IAAI,CAAC;QAE3B,eAAS,GAAc,IAAI,CAAC;QAG5B,mBAAa,GAAY,IAAI,CAAC;QAE9B,uBAAiB,GAAY,IAAI,CAAC;QAElC,qBAAe,GAAY,IAAI,CAAC;QAGhC,mBAAa,GAAY,IAAI,CAAC;;IAiJ/B,CAAC;IA9IA,WAAW;IACX,6BAA6B;IAE7B,4BAAM,GAAN;QACC,MAAM;QACN,IAAI,GAAG,IAAI,CAAC;QACZ,gBAAgB;QAChB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAC,IAAI,CAAC,CAAC;QAEzB,oBAAU,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,oBAAU,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;IACrF,CAAC;IAED,QAAQ;IACE,qCAAe,GAAzB;QACE,IAAI,CAAC,QAAQ,GAAG;QAChB,+CAA+C;SAC9C,CAAC;IACJ,CAAC;IACD,QAAQ;IACE,wCAAkB,GAA5B;QACC,IAAI,CAAC,QAAQ,GAAG;YACf,mBAAmB,EAAG,IAAI,CAAC,iBAAiB;YAC5C,iBAAiB,EAAE,IAAI,CAAC,eAAe;YAEvC,eAAe,EAAE,IAAI,CAAC,aAAa;YAEnC,6BAA6B,EAAE,IAAI,CAAC,2BAA2B;YAC/D,0BAA0B,EAAE,IAAI,CAAC,wBAAwB;YACzD,0BAA0B,EAAE,IAAI,CAAC,wBAAwB;SAEzD,CAAC;IACH,CAAC;IAEM,mCAAa,GAApB,UAAqB,EAAE;QACtB,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAA;IAClC,CAAC;IAED,QAAQ;IACE,8CAAwB,GAA/B,UAAgC,GAAY;QACxC,IAAI,SAAS,GAAG,GAAG,CAAC,aAAa,CAAC,iBAAO,CAAC,WAAW,CAAC,CAAC;QAE7D,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAA;QACjC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;QACjC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAA;QAC5B,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAA;QAE9B,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;YACxC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAA;SACxC;IACF,CAAC;IAEM,8CAAwB,GAA/B;QACC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAA;QACnC,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAA;QAE9B,IAAI,UAAU,GAAG,oBAAU,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAA;QAClF,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAA;IACvC,CAAC;IAEM,qCAAe,GAAtB,UAAuB,SAAS,EAAE,WAAW;QAC5C,iBAAiB;QACjB,IAAG,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,EAAC;SAErC;aAAI;YACJ,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,CAAA;SAC5C;IACF,CAAC;IAEM,iDAA2B,GAAlC;QACC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAA;QACvB,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAA;IACjC,CAAC;IAED,SAAS;IACT,+BAAS,GAAT;QAAA,iBA8CC;QA7CA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAC;YACtC,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAC7B,CAAC,EAAC,QAAQ,CAAC,CAAC;QAEZ,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE;YAC5C,oBAAU,CAAC,WAAW,EAAE,CAAC,iBAAiB,EAAE,CAAA;QAE7C,CAAC,EAAE,UAAU,CAAC,CAAA;QAEd,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,gBAAgB,EAAE;YAC/C,KAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAA;QACrC,CAAC,EAAE,MAAM,CAAC,CAAA;QAEV,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,mBAAmB,EAAE;YAClD,KAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAA;QACnC,CAAC,EAAE,UAAU,CAAC,CAAA;QAEd,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,mBAAmB,EAAE;YAClD,KAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAA;QACnC,CAAC,EAAE,SAAS,CAAC,CAAA;QAEb,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE;YACvC,IAAI,MAAM,GAAG,oBAAU,CAAC,WAAW,EAAE,CAAC,IAAI,CAAA;YAC1C,oBAAU,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAI,CAAC,KAAK,CAAC,UAAU,EAAE,KAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAA;YAC5F,KAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAA;QAC7B,CAAC,EAAE,MAAM,CAAC,CAAA;QAEV,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE;YACzC,KAAI,CAAC,KAAK,CAAC,aAAa,GAAG,KAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAA;YAEtD,IAAI,UAAU,GAAG,oBAAU,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,KAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAA;YACrF,IAAG,CAAC,UAAU,EAAC;gBACd,IAAI,SAAS,GAAG,KAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAA;gBAC3C,oBAAU,CAAC,WAAW,EAAE,CAAC,YAAY,CAAC,SAAS,CAAC,CAAA;aAChD;iBAAI;gBACJ,KAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAA;gBACnC,KAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAA;gBAC9B,KAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAA;aACtC;QACF,CAAC,EAAE,6BAAO,IAAI,CAAC,IAAI,CAAC,eAAe,EAAI,CAAC,CAAA;QAExC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE;YACzC,oBAAU,CAAC,WAAW,EAAE,CAAC,iBAAiB,EAAE,CAAA;QAC7C,CAAC,EAAE,IAAI,CAAC,CAAA;IAET,CAAC;IAEO,uCAAiB,GAAzB,UAA0B,GAAG;QAC5B,IAAG,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,EAAC;YAC/B,OAAM;SACN;QACD,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAA;QAChC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAA;QAChC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAA;IAC5B,CAAC;IACD,aAAa;IACb,KAAK;IACL,aAAa;IACb,KAAK;IACL,mBAAmB;IACnB,KAAK;IAEL,gBAAgB;IAEhB,+BAAS,GAAT;QACC,iBAAM,SAAS,WAAE,CAAC;IACnB,CAAC;IA/KD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;kDACQ;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;wDACc;IAEjC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;+CACK;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sDACY;IAE9B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yDACe;IAEnC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;sDACY;IAEhC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;mDACS;IAE3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;mDACS;IAE3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;oDACU;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;iDACO;IAE3B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;kDACQ;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sDACY;IAE9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0DACgB;IAElC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wDACY;IAGhC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sDACY;IApCV,WAAW;QAD/B,OAAO;OACa,WAAW,CAqL/B;IAAD,kBAAC;CArLD,AAqLC,CArLwC,kBAAQ,GAqLhD;kBArLoB,WAAW","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\friends","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\n\nimport {friendShow, addFriend, friend, chat, chatList} from \"../../../../manager/public/interface/iFriend\"\nimport FriendsMgr from \"../../../../manager/public/friendsMgr\"\nimport Package from \"../../../../framework/net/package\";\nimport { dataids } from \"../../../../framework/net/dataids\";\n\n/*\nauthor: 蔡世达\n日期:2018-11-18 15:24:08\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: FriendsCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tpublic friendsData: friendShow = <friendShow>{}\n\n\tpublic curSearchData: null\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.friendsData.friendList = FriendsMgr.getInstance().friendsInfoList\n\t\tthis.friendsData.mostFriendsNum = 0\n\t\tif(this.friendsData.friendList){\n\t\t\tthis.friendsData.friendsNum = this.friendsData.friendList.length\n\t\t}else{\n\t\t\tthis.friendsData.friendsNum = 0\n\t\t}\n\t}\n\n\tpublic updateData(): void {\n\t\tthis.friendsData.friendList = FriendsMgr.getInstance().friendsInfoList\n\t\tthis.friendsData.mostFriendsNum = 0\n\t\tthis.friendsData.friendsNum = this.friendsData.friendList.length\n\t}\n\n\tpublic curChatUid: number = 0\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui={\n\t\tbtn_close: ctrl.btn_close,\n\t\tlblFriend: ctrl.lbl_friendCount,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//在线好友数量/好友数量\n\t\tfriendList: ctrl.friendContent,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//好友列表\n\t\tfriend: ctrl.friend,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//好友预制\n\t\tfriendTips: ctrl.friendTips,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//好友聊天提示\n\t\trightFrame: ctrl.rightFrame,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//好友聊天界面\n\t\ttalkLeft: ctrl.talkLeft,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//好友聊天左侧预制\n\t\ttalkRight: ctrl.talkRight,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//好友聊天右侧预制\n\t\t\n\t\tbtn_addFriend: ctrl.btn_addFriend,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//添加好友按钮\n\t\tbtn_inviteFriend: ctrl.btn_inviteFriend,\t\t\t\t\t\t\t\t\t\t\t\t\t\t//邀请好友按钮\n\t\t\n\t\tbtn_close_challenge:ctrl.nodeChallenge.getChildByName(\"btn_close\"),\t\t\t\t\t\t\t\t//关闭友谊战界面\n\t\tnodeChallenge: ctrl.nodeChallenge,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//友谊战界面\n\n\t\tnodeChatContent:ctrl.rightFrame.getChildByName(\"input\").getChildByName(\"content\"),\t\t\t\t//聊天输入框\n\t\tnodeChat:ctrl.chatContent,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//聊天节点\n\t\tbtn_send:ctrl.rightFrame.getChildByName(\"btn_send\"),\t\t\t\t\t\t\t\t\t\t\t//消息发送\n\n\t\t//好友界面\n\t\tnodeAddFriend: ctrl.nodeAddFriend,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//添加好友界面\n\t\tbtn_close_addFriend:ctrl.nodeAddFriend.getChildByName(\"btn_close\"),\t\t\t\t\t\t\t\t//关闭添加好友界面\n\t\tbtn_search:ctrl.nodeAddFriend.getChildByName(\"btn_search\"),\t\t\t\t\t\t\t\t\t\t//查询按钮\n\t\tnodeUserID:ctrl.nodeAddFriend.getChildByName(\"inputUID\").getChildByName(\"applyFriend\"),\t\t\t//添加好友的输入框\n\t\tlblType:ctrl.nodeAddFriend.getChildByName(\"label\"),\t\t\t\t\t\t\t\t\t\t\t\t//底部玩家显示的类型\n\t\tnodeAddFriendList:ctrl.nodeAddFriendList,\t\t\t\t\t\t\t\t\t\t\t\t\t\t//添加好友界面的列表节点\n\t\tAddFriend:ctrl.prefabAddFriend,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//添加好友界面的预制文件\n\t\tbtnRefresh:ctrl.nodeAddFriend.getChildByName(\"btn_refresh\"),\t\t\t\t\t\t\t\t\t//添加好友界面的刷新按钮\n\t}\n\n\tconstructor(model){\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.updateFriendListNode()\n\t\tthis.ui.friendTips.active = true\n\t\tthis.ui.rightFrame.active = false\n\t\tthis.ui.nodeAddFriend.active = false\n\t\tthis.ui.nodeChallenge.active = false\n\t}\n\n\tpublic updateFriendListNode(): void {\n\t\t//更新好友数量\n\t\tthis.ui.lblFriend.string = `我的好友  ${this.model.friendsData.friendsNum}/${this.model.friendsData.mostFriendsNum}` \n\t\t//更新好友列表\n\t\tthis.updateFriendList()\n\t}\n\n\t//好友列表整理\n\tpublic updateFriendList(): void {\n\t\tthis.ui.friendList.destroyAllChildren()\n\t\tfor (let key in this.model.friendsData.friendList) {\n\t\t\tif(typeof this.model.friendsData.friendList[key] == \"object\"){\n\t\t\t\tlet friendNode = this.addPrefabNode(this.ui.friend, this.ui.friendList);\n\t\t\t\tfriendNode.getComponent(\"friend\").initFriendData(this.model.friendsData.friendList[key])\n\t\t\t}\n\t\t}\n\t}\n\n\t//是否显示添加好友界面\n\tpublic showNodeAddFriend(bshow): void {\n\t\tthis.ui.nodeAddFriend.active = bshow\n\t}\n\n\t//是否显示邀请好友界面\n\tpublic showNodeInviteFriend(bshow): void {\n\n\t}\n\n\t//是否显示友谊战界面\n\tpublic showNodeChallenge(bshow): void {\n\t\tthis.ui.nodeChallenge.active = bshow\n\t}\n\t\n\t//显示聊天界面\n\tpublic showNodeTalk(uid): void {\n\t\tthis.ui.friendTips.active = false\n\t\tthis.ui.nodeChat.destroyAllChildren()\n\t\t//this.ui.\n\t}\n\n\t//添加好友界面的搜索ID\n\tpublic getSearchUserID(): any {\n\t\treturn  this.ui.nodeUserID.getComponent(cc.EditBox).string\n\t}\n\n\tpublic getChatContent(): any {\n\t\treturn this.ui.nodeChatContent.getComponent(cc.EditBox).string\n\t}\n\n\tpublic clearChatContent(): void {\n\t\tthis.ui.nodeChatContent.getComponent(cc.EditBox).string = \"\"\n\t}\n\n\tpublic clearNodeAddFriend(): void {\n\t\tthis.ui.nodeAddFriendList.destroyAllChildren()\n\t}\n\n\tpublic addNodeAddFriend(userInfo): void {\n\t\tlet addfriend = this.addPrefabNode(this.ui.AddFriend, this.ui.nodeAddFriendList);\n\t\taddfriend.getComponent(\"addFriend\").initData(userInfo)\n\t}\n\n\tpublic setAddFriendType(type:any): void{\n\t\tthis.ui.lblType.getComponent(cc.Label).string = type\n\t}\n\n\n\tpublic refreshFriendList(uid): void {\n\t\tfor(var i = 0; i < this.ui.friendList.childrenCount; i++){\n\t\t\tvar l_node = this.ui.friendList.children[i]\n\t\t\tl_node.getComponent(\"friend\").isSelect(l_node.getComponent(\"friend\").getFriendId() == uid)\n\t\t}\n\t}\n\n\tpublic refreshFriendChat(uid): void {\n\t\tthis.ui.friendTips.active = false\n\t\tthis.ui.rightFrame.active = true\n\n\t\tthis.ui.nodeChat.destroyAllChildren()\n\t\tlet l_chatContent = FriendsMgr.getInstance().chatContent\n\n\t\tif(l_chatContent.list && l_chatContent.list[uid]){\n\t\t\tlet chatCount = l_chatContent.list[uid].chatContent.length\n\t\t\tlet chatContent = l_chatContent.list[uid].chatContent\n\t\n\t\t\tfor(var i = 0; i < chatCount; i++){\n\t\t\t\tlet chatItem = chatContent[i]\n\t\t\t\tthis.addNodeTalk(chatItem)\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic recCurUserChatContent(chatContent): void {\n\t\tthis.addNodeTalk(chatContent)\n\t}\n\n\tprivate addNodeTalk(chat): void {\n\t\tlet chatNode\n\t\tif(chat.fromID == FriendsMgr.getInstance().myId){\n\t\t\tchatNode = this.addPrefabNode(this.ui.talkRight, this.ui.nodeChat);\n\t\t}else{\n\t\t\tchatNode = this.addPrefabNode(this.ui.talkLeft, this.ui.nodeChat);\n\t\t}\n\t\t\n\t\tchatNode.getComponent(\"talk\").setData(chat, FriendsMgr.getInstance().getFriendInfos(chat.fromID))\n\t}\n\n\tpublic showUnreadUser(uid): void {\n\n\t}\n}\n//c, 控制\n@ccclass\nexport default class FriendsCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Button)\n\tbtn_close: cc.Button = null;\n\t@property(cc.Label)\n\tlbl_friendCount: cc.Label = null;\n\t@property(cc.Prefab)\n\tfriend: cc.Prefab = null;\n\t@property(cc.Node)\n\tfriendContent: cc.Node = null;\n\t@property(cc.Button)\n\tbtn_inviteFriend: cc.Button = null;\n\t@property(cc.Button)\n\tbtn_addFriend: cc.Button = null;\n\t@property(cc.Node)\n\tfriendTips: cc.Node = null;\n\t@property(cc.Node)\n\trightFrame: cc.Node = null;\n\t@property(cc.Node)\n\tchatContent: cc.Node = null;\n\n\t@property(cc.Prefab)\n\ttalkLeft: cc.Prefab = null;\n\t@property(cc.Prefab)\n\ttalkRight: cc.Prefab = null;\n\n\t@property(cc.Node)\n\tnodeAddFriend: cc.Node = null;\n\t@property(cc.Node)\n\tnodeAddFriendList: cc.Node = null;\n\t@property(cc.Prefab)\n\tprefabAddFriend: cc.Node = null;\n\n\t@property(cc.Node)\n\tnodeChallenge: cc.Node = null;\n\t\n\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\tonLoad (){\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model,View);\n\n\t\tFriendsMgr.getInstance().reqFriendInfos(FriendsMgr.getInstance().friendsIds.friends)\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t \tthis.n_events = {\n\t\t\t//\"plaza.friend.applyFriend\": this.applyFriend,\n\t\t };\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {\n\t\t\t\"refreshFriendList\" : this.refreshFriendList,\n\t\t\t\"chat.recNewChat\": this.chat_recNewChat,\t\t\t\t\t\t\t\t\t\t//接收到聊天消息\n\n\t\t\t\"showChallenge\": this.showChallenge,\n\n\t\t\t'search.entry.reqFriendInfos': this.search_entry_reqFriendInfos,\n\t\t\t\"search.entry.randomUsers\": this.search_entry_randomUsers,\n\t\t\t\"search.entry.searchUsers\": this.search_entry_searchUsers,\n\t\t\t\n\t\t};\n\t}\n\t\n\tpublic showChallenge(id): void{\n\t\tthis.view.showNodeChallenge(true)\n\t}\n\n\t//返回推荐好友\n    public search_entry_randomUsers(msg: Package){\n        let userInfos = msg.getDataByType(dataids.ID_USERLIST);\n\t\t\n\t\tthis.view.showNodeAddFriend(true)\n\t\tthis.view.setAddFriendType(\"推荐：\")\n\t\tthis.view.clearChatContent()\n\t\tthis.view.clearNodeAddFriend()\n\n\t\tfor(var i = 0; i < userInfos.length; i++){\n\t\t\tthis.view.addNodeAddFriend(userInfos[i])\n\t\t}\n\t}\n\t\n\tpublic search_entry_searchUsers(): void {\n\t\tthis.view.setAddFriendType(\"查询结果：\")\n\t\tthis.view.clearNodeAddFriend()\n\t\t\t\n\t\tvar l_userInfo = FriendsMgr.getInstance().isAlwaysSearch(this.model.curSearchData)\n\t\tthis.view.addNodeAddFriend(l_userInfo)\n\t}\n\n\tpublic chat_recNewChat(friendUid, chatContent): void {\n\t\t//如果当前聊天对象不是现在接收的\n\t\tif(friendUid != this.model.curChatUid){\n\n\t\t}else{\n\t\t\tthis.view.recCurUserChatContent(chatContent)\n\t\t}\n\t}\n\n\tpublic search_entry_reqFriendInfos(): void {\n\t\tthis.model.updateData()\n\t\tthis.view.updateFriendListNode()\n\t}\n\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\",this.ui.btn_close,()=>{\n\t\t\tthis.closeModule(\"friends\");\n\t\t},\"关闭好友界面\");\n\n\t\tthis.connect(\"click\", this.ui.btn_addFriend, ()=>{\n\t\t\tFriendsMgr.getInstance().searchRandomUsers()\n\t\t\t\n\t\t}, \"显示添加好友界面\")\n\n\t\tthis.connect(\"click\", this.ui.btn_inviteFriend, ()=>{\n\t\t\tthis.view.showNodeInviteFriend(true)\n\t\t}, \"邀请好友\")\n\n\t\tthis.connect(\"click\", this.ui.btn_close_addFriend, ()=>{\n\t\t\tthis.view.showNodeAddFriend(false)\n\t\t}, \"关闭添加好友界面\")\n\n\t\tthis.connect(\"click\", this.ui.btn_close_challenge, ()=>{\n\t\t\tthis.view.showNodeChallenge(false)\n\t\t}, \"关闭友谊战界面\")\n\n\t\tthis.connect(\"click\", this.ui.btn_send, ()=>{\n\t\t\tlet myInfo = FriendsMgr.getInstance().myId\n\t\t\tFriendsMgr.getInstance().sendChat(myInfo, this.model.curChatUid, this.view.getChatContent())\n\t\t\tthis.view.clearChatContent()\n\t\t}, \"发送消息\")\n\n\t\tthis.connect(\"click\", this.ui.btn_search, ()=>{\n\t\t\tthis.model.curSearchData = this.view.getSearchUserID()\n\n\t\t\tvar l_userInfo = FriendsMgr.getInstance().isAlwaysSearch(this.view.getSearchUserID())\n\t\t\tif(!l_userInfo){\n\t\t\t\tlet searchUId = this.view.getSearchUserID()\n\t\t\t\tFriendsMgr.getInstance().searchFriend(searchUId)\n\t\t\t}else{\n\t\t\t\tthis.view.setAddFriendType(\"查询结果：\")\n\t\t\t\tthis.view.clearNodeAddFriend()\n\t\t\t\tthis.view.addNodeAddFriend(l_userInfo)\n\t\t\t}\n\t\t}, `查询用户${this.view.getSearchUserID()}`)\n\n\t\tthis.connect(\"click\", this.ui.btnRefresh, ()=>{\n\t\t\tFriendsMgr.getInstance().searchRandomUsers()\n\t\t}, \"刷新\")\n\n\t}\n\n\tprivate refreshFriendList(uid): void {\n\t\tif(uid == this.model.curChatUid){\n\t\t\treturn\n\t\t}\n\t\tthis.view.refreshFriendList(uid)\n\t\tthis.view.refreshFriendChat(uid)\n\t\tthis.model.curChatUid = uid\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t// update(dt) {}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}