{"version":3,"sources":["talk.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\friends","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\n\nimport {chat} from \"../../../../manager/public/interface/iFriend\"\nimport UserMgr from \"../../../../manager/public/userMgr\";\n/*\nauthor: 蔡世达\n日期:2018-11-21 15:26:46\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: TalkCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n    public chatData:chat = <chat>{};\n\tpublic myInfo = UserMgr.getInstance().getMyInfo()\n\tpublic userInfo\n    constructor() {\n\t\tsuper();\n    }\n}\n\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui={\n        head: ctrl.node.getChildByName(\"head\"),\n        name: ctrl.node.getChildByName(\"name\"),\n        word: ctrl.node.getChildByName(\"frame\").getChildByName(\"word\"),\n\t}\n\tconstructor(model){\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n    }\n    \n    public updateUI(): void {\n\t\tvar name = \"\"\n\t\t\n        if(this.model.myInfo.userUID == this.model.chatData.fromID){\n            name = this.model.myInfo.userName\n        }else{\n\t\t\tif(this.model.userInfo){\n\t\t\t\tlet info = this.model.userInfo\n\t\t\t\tname = info.nickname\n\t\t\t}\n        }\n        this.ui.name.getComponent(cc.Label).string = name\n        this.ui.word.getComponent(cc.Label).string = this.model.chatData.content\n\t}\n\t\n\tpublic UpdateUserInfo(): void{\n\t\tvar name\n        if(this.model.myInfo.userUID == this.model.chatData.fromID){\n            name = this.model.myInfo.userName\n        }else{\n\t\t\tlet info = this.model.userInfo\n            name = info.nickname\n        }\n        this.ui.name.getComponent(cc.Label).string = name\n\t}\n}\n//c, 控制\n@ccclass\nexport default class TalkCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n    //这边去声明ui组件\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\tonLoad (){\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model,View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t \tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n        \n    }\n\n    public setData(chatData, userInfo): void {\n\t\tthis.model.chatData = chatData\n\t\tthis.model.userInfo = userInfo\n        this.view.updateUI()\n\t}\n\t\n\tpublic setUserInfo(userInfo): void {\n\t\tthis.model.userInfo = userInfo\n\t\tthis.view.UpdateUserInfo()\n\t}\n\n\tpublic getID():any{\n\t\treturn this.model.chatData.fromID\n\t}\n    \n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t// update(dt) {}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}