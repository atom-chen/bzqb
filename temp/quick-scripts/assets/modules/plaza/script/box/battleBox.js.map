{"version":3,"sources":["battleBox.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\box","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport BoxMgr from \"../../../../manager/public/boxMgr\";\nimport GameNet from \"../../../../framework/modules/GameNet\";\n\n/*\nauthor: 蒙磊\n日期:2018-11-08 11:20:57\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: BattleBoxCtrl;\nlet boxMgr=BoxMgr.getInstance();\n\n//模型，数据处理\nclass Model extends BaseModel {\n\thour=null;minute=null ;second =null;\n\tconstructor() {\n\t\tsuper();\n\t\tthis.initTime();\n\t}\n\t\n\t//时间\n\tinitTime(){\n\t\tlet time =boxMgr.curBattleBox.boxInfo.unlock_time\n\t\tlet hour =Math.floor(time /3600)\n\t\tlet minute =Math.floor((time %3600)/60)\n\t\tlet second=Math.floor(time%60)\n\t\tthis.hour = hour>=10? hour:'0'+hour;\n\t\tthis.minute = minute>=10? minute:'0'+minute;\n\t\tthis.second = second>=10? second:'0'+second;\n\t}\n\t\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui={\n\t\t//在这里声明ui\n\t\t//button\n\t\tbtn_unlock:ctrl.btn_unlock,\n\t\tbtn_close:ctrl.btn_close,\n\n\t\t//label\n\t\tlab_time:ctrl.lab_time,\n\t}\n\tconstructor(model){\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.showBoxTime();\n\t}\n\n\tshowBoxTime(){\n\t\tthis.ui.lab_time.getComponent(cc.Label).string =this.model.hour+\":\"+this.model.minute+\":\"+this.model.second\n\t}\n}\n\n//c, 控制\n@ccclass\nexport default class BattleBoxCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t//button\n\t@property(cc.Node)\n\tbtn_unlock: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_close: cc.Node = null;\n\n\t//label\n\t@property(cc.Node)\n\tlab_time: cc.Node = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad (){\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model,View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t \tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.ui.btn_close,this.closeBox,\"关闭战斗宝箱\");\n\t\tthis.connect(\"click\", this.ui.btn_unlock,this.unlockBox,\"开启战斗宝箱\");\n\t}\n\tcloseBox(){\n\t\tthis.closeModule(\"battleBox\");\n\t}\n\tunlockBox(){\n\t\tboxMgr.unlockBox();\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t// update(dt) {}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}