{"version":3,"sources":["achievementBG.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\achievement","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport AchievementMgr from \"../../../../manager/public/achievementMgr\";\nimport { array } from \"../../../../framework/lib/jszip/support\";\n\n/*\nauthor: 蒙磊\n日期:2018-11-09 15:46:41\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: AchievementCtrl;\nlet achievementMgrMgr = AchievementMgr.getInstance();\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tachievement: any = [];\n\tachievementProgress: any = [];\n\tinitData() {\n\t\tthis.achievement = achievementMgrMgr.achievement;\n\t\tthis.setProgress();\n\t}\n\tsetProgress() {\n\t\tfor (let i = 0; i < this.achievement.length; i++) {\n\t\t\tlet curProgress = this.achievement[i].src;\n\t\t\tlet targetProgress = this.achievement[i].target;\n\t\t\tif(typeof targetProgress ===\"object\"){\n\t\t\t\ttargetProgress = targetProgress.quantity\n\t\t\t}\n\t\t\tthis.achievementProgress[i] = \"进度\" + curProgress + \"/\" + targetProgress\n\t\t}\n\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\t//在这里声明ui\n\t\tbtn_close: ctrl.btn_close,\n\t\tachievementList: ctrl.achievementList,\n\t\tachievement: ctrl.achievement,\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\tshowLabelString(obj: cc.Label, content: string) {\n\t\tobj.string = content;\n\t}\n\tpublic addPrefab(obj_node: cc.Node, obj_Prefab: cc.Prefab) {\n\t\treturn this.addPrefabNode(obj_Prefab, obj_node);\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\n\t}\n}\n//c, 控制\n@ccclass\nexport default class AchievementCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Node)\n\tbtn_close: cc.Node = null;\n\n\t//note\n\t@property(cc.Node)\n\tachievementList: cc.Node = null;\n\t//Prefab\n\t@property(cc.Prefab)\n\tachievement: cc.Prefab = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t\tthis.initData();\n\t}\n\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.ui.btn_close, this.close, \"关闭\");\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\tinitData() {\n\t\tthis.model.initData();\n\t\tthis.ui.achievementList.height = (this.model.achievement.length) * 90;\n\t\tfor (let i = 0; i < this.model.achievement.length; i++) {\n\t\t\tlet achievement = this.view.addPrefab(this.ui.achievementList, this.ui.achievement)\n\t\t\tachievement.setPosition(cc.v2(0, -180 + (i * -90)))\n\t\t\tconsole.log(this.model.achievement[i])\n\t\t\tachievement.getComponent(\"achievement\").setLabel(this.model.achievement[i].tableInfo.name, this.model.achievement[i].tableInfo.des, this.model.achievementProgress[i]);\n\t\t\tachievement.getComponent(\"achievement\").setButton(this.model.achievement[i].recevied)\n\t\t}\n\n\t}\n\tclose() {\n\t\tthis.closeModule(\"achievementBG\")\n\t}\n\t// update(dt) {}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}