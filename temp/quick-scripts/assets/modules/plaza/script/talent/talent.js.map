{"version":3,"sources":["talent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\talent","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport talentMgr from \"../../../../manager/public/talentMgr\";\n\n/*\nauthor: 蒙磊\n日期:2018-11-16 21:27:15\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: TalentCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tindex:number =null;\n\tcurSuspensionFrame=null;\n\ttalentData: any = null;\n\tlevel: string = null;\n\tconstructor() {\n\t\tsuper();\n\t}\n\tsetLevel() {\n\t\tif(!this.talentData.curLevel){\n\t\t\tthis.talentData.curLevel =0;\n\t\t}\n\t\tlet curLevel =this.talentData.curLevel;\n\t\tthis.level = curLevel + \"/\" + this.talentData.maxLevel\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\t//在这里声明ui\n\t\tsuspensionFrame: ctrl.suspensionFrame,\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tshowIcon(icon) {\n\t\tvar iconNode = new cc.Node();\n\t\tvar sp_icon = iconNode.addComponent(cc.Sprite)\n\t\tsp_icon.spriteFrame = this.getImageSync(icon)\n\t\tthis.node.addChild(iconNode)\n\t}\n\t//显示label内容\n\tshowLabelString(obj: cc.Label, content: string) {\n\t\tobj.string = content;\n\t}\n\tpublic initUi() {\n\n\t}\n\tpublic addPrefab(obj_node: cc.Node, obj_Prefab: cc.Prefab) {\n\t\treturn this.addPrefabNode(obj_Prefab, obj_node);\n\t}\n}\n//c, 控制\n@ccclass\nexport default class TalentCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t//Prefab\n\t@property(cc.Prefab)\n\tsuspensionFrame: cc.Prefab = null;\n\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t\t\n\t}\n\t//绑定天赋信息\n\tsetTalentData(data: any,index:number) {\n\t\tthis.model.index =index;\n\t\tthis.model.talentData = data;\n\t}\n\t//绑定升级预制体\n\tsetSuspensionFrame(obj) {\n\t\tthis.ui.suspensionFrame = obj;\n\t}\n\t//显示升级界面\n\tshowSuspensionFrame() {\n\t\tthis.model.curSuspensionFrame = this.view.addPrefab(this.node.parent, this.ui.suspensionFrame)\n\t\tthis.model.curSuspensionFrame.getComponent(\"suspensionframe\").setData(this.model.talentData);\n\t\tthis.model.curSuspensionFrame.getComponent(\"suspensionframe\").showData();\n\t\ttalentMgr.getInstance().curTalent =this;\n\t}\n\t//刷新等级level\n\trefreshLevel() {\n\t\tthis.model.setLevel();\n\t\t//console.log(this.node.children[0])\n\t\tif(this.node.children[0].getComponent(cc.Label)){\n\t\t\tthis.view.showLabelString(this.node.children[0].getComponent(cc.Label),this.model.level)\n\t\t }\n\t}\n\t//增加图标\n\taddIcon(icon: string) {\n\t\tthis.view.showIcon(icon)\n\t}\n\t// closeSuspensionFrame() {\n\t// \tthis.model.curSuspensionFrame.destroy();\n\t// \tthis.model.curSuspensionFrame = null;\n\t// }\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {\n\t\n\t\t};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.node, this.showSuspensionFrame, \"学习天赋\");\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\tupdataTalentData(data){\n\t\tthis.model.talentData = data;\n\t\tthis.model.curSuspensionFrame.getComponent(\"suspensionframe\").setData(data);\n\t\tthis.model.curSuspensionFrame.getComponent(\"suspensionframe\").showData();\n\t}\n\t// update(dt) {}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}