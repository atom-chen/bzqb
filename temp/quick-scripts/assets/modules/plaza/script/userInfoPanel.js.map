{"version":3,"sources":["userInfoPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script","sourcesContent":["import BaseModel from \"../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../framework/baseClass/BaseCtrl\";\nimport UserMgr from \"../../../manager/public/userMgr\";\nimport { changeName, user, userRank, userBattle } from \"../../../manager/public/interface/iUserInfo\";\nimport RoleMgr from \"../../../manager/public/roleMgr\";\n\n/*\nauthor: 陈斌杰\n日期:2018-11-02 18:42:02\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: UserInfoPanelCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tpublic dataChoiceState: number = 0;\t\t\t\t\t\t\t\t\t//玩家数据选择显示状态  0 显示基础数据，1 显示对战数据\n\tpublic user: user = UserMgr.getInstance().user;\t\t\t\t\t\t//玩家信息数据\n\tpublic userName: string = this.user.userName;\n\tpublic userUID: number = this.user.userUID;\n\tpublic userRank: userRank = UserMgr.getInstance().userRank;\t\t\t//玩家段位数据\n\tpublic userBattle: userBattle = UserMgr.getInstance().userBattle;\t//玩家战斗数据\n\tpublic isModifyName: boolean = true;\n\n\t//修改昵称数据\n\tpublic setUserName (name: string) {\n\t\tthis.userName = name;\n\t}\n\n\t//设置昵称是否可修改\n\tpublic setModifyState (state: boolean) {\n\t\tthis.isModifyName = state;\n\t}\n\n\t//修改选择显示数据按钮的状态\n\tpublic setDataChoiceState (btnId: number): void {\n\t\tthis.dataChoiceState = btnId;\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui={\n\t\tuserUID: ctrl.userUID,\n\t\tuserName: ctrl.userName,\n\t\troleId: ctrl.frame_left.getChildByName(\"playerIco\"),\t\t\t\t\t\t\t\t\t//角色Id，显示角色图片\n\t\tvipLv: ctrl.frame_left.getChildByName(\"vipLv\"),\t\t\t\t\t\t\t\t\t\t\t//vip等级\n\t\tbtn_modify: ctrl.frame_left.getChildByName(\"btn_modify\"),\t\t\t\t\t\t\t\t//修改昵称按钮，弹出修改昵称界面\n\t\tmodifyName: ctrl.modifyName,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//修改昵称界面\n\t\tbtn_closeModify: ctrl.modifyName.getChildByName(\"btn_closeModify\"),\t\t\t\t\t\t//关闭修改昵称界面按钮\n\t\tinputName: ctrl.modifyName.getChildByName(\"inputName\").getComponent(cc.EditBox),\t\t//修改昵称输入按钮\n\t\tbtn_modifyName: ctrl.modifyName.getChildByName(\"btn_modifyName\"),\t\t\t\t\t\t//确定修改昵称，需要花费粉晶\n\t\tvipPic: ctrl.vipPic,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//vip图片\n\t\tgrade: ctrl.frame_left.getChildByName(\"level\").getComponent(cc.Label),\t\t\t\t\t//玩家等级\n\t\tuserExp: ctrl.frame_left.getChildByName(\"exp\").getComponent(cc.Label),\t\t\t\t\t//玩家经验值\n\t\tbtn_data: ctrl.btn_data,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//显示数据按钮\n\t\tbtn_baseData: ctrl.btn_data.getChildByName(\"btn_baseData\").getComponent(cc.Button),\t\t//基础数据按钮\n\t\tbtn_battleData: ctrl.btn_data.getChildByName(\"btn_battleData\").getComponent(cc.Button),\t//对战数据按钮\n\t\tbaseData: ctrl.baseData,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//显示基础数据界面\n\t\tbattleData: ctrl.battleData,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//显示对战界面\n\t\tpropertyData: ctrl.propertyData,\t\t\t\t\t\t\t\t\t\t\t\t\t\t//战斗数据\n\t\tstatisticsData: ctrl.statisticsData,\t\t\t\t\t\t\t\t\t\t\t\t\t//统计数据\n\t\tbtn_close: ctrl.btn_close,\n\t}\n\tconstructor(model){\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.initUser();\n\t\tthis.initBaseData();\n\t\tthis.initBattleData();\n\t\tthis.ui.modifyName.active = false;\n\t\tthis.ui.inputName.string = this.model.userName;\n\t\tthis.ui.baseData.active = true;\n\t\tthis.ui.battleData.active = false;\n\t}\n\n\t//初始化玩家信息数据\n\tpublic initUser(): void {\n\t\tthis.ui.userUID.string = this.model.user.userUID.toString();\n\t\tthis.refreshRole(this.model.user.roleId);\n\t\tthis.ui.vipLv.getComponent(cc.Sprite).spriteFrame = this.ui.vipPic;\n\t\tthis.ui.userName.string = this.model.userName;\n\t\tthis.ui.grade.string = this.model.user.grade.toString();\n\t\tthis.ui.userExp.string = this.model.user.userExp.toString() + \"/\" + this.model.user.experience.toString();\n\t}\n\n\t//初始化基础数据\n\tpublic initBaseData(): void {\n\t\t\n\t}\n\n\t//初始化对战数据\n\tpublic initBattleData(): void {\n\t\tthis.ui.propertyData.getChildByName(\"hpData\").getComponent(cc.Label).string = this.model.userBattle.hp.toString();\t\t\t\t\t//血量\n\t\tthis.ui.propertyData.getChildByName(\"ctrData\").getComponent(cc.Label).string = this.model.userBattle.ctr.toString();\t\t\t\t//暴击\n\t\tthis.ui.propertyData.getChildByName(\"hurtData\").getComponent(cc.Label).string = this.model.userBattle.atk.toString();\t\t\t\t//伤害\n\t\tthis.ui.propertyData.getChildByName(\"ctrHurtData\").getComponent(cc.Label).string = this.model.userBattle.crtdamage.toString();\t\t//暴击伤害\n\n\t\tthis.ui.statisticsData.getChildByName(\"winData\").getComponent(cc.Label).string = this.model.user.winNum.toString();\t\t\t\t\t//胜利局数\n\t\tthis.ui.statisticsData.getChildByName(\"winOddsData\").getComponent(cc.Label).string = this.model.user.winProbability.toString()+\"%\";\t//胜率\n\t\tthis.ui.statisticsData.getChildByName(\"rankData\").getComponent(cc.Label).string = this.model.user.mostRank.toString();\t\t\t\t//最高段位\n\t\tthis.ui.statisticsData.getChildByName(\"haveEffectsData\").getComponent(cc.Label).string = this.model.user.effects.toString()+\"/36\";\t//已解锁特技数量\n\t\t// this.ui.statisticsData.getChildByName(\"cmdUsingData\").getComponent(cc.Label).string = this.model.user.effects.toString();\t\t//最常用特技\n\t}\n\n\t//刷新昵称\n\tpublic refreshName (name: string): void {\n\t\tthis.model.setUserName(name);\n\t\tthis.ui.userName.string = this.model.userName;\n\t}\n\n\t//刷新数据显示界面\n\tpublic refreshShowData (btnId: number): void {\n\t\tif (btnId == this.model.dataChoiceState) { return }\n\t\tif (btnId == 0) {\n\t\t\tthis.ui.baseData.active = true;\n\t\t\tthis.ui.battleData.active = false;\n\t\t} else {\n\t\t\tthis.ui.baseData.active = false;\n\t\t\tthis.ui.battleData.active = true;\n\t\t}\n\t\tthis.model.setDataChoiceState(btnId);\n\t}\n\n\t//刷新角色显示\n\tpublic refreshRole(roleId: number): void {\n\t\tlet roleListData = RoleMgr.getInstance().rolesData;\n\t\tlet id = null;\n\t\tfor (let i = 0; i < roleListData.length; i++) {\n\t\t\tlet roleData = roleListData[i];\n\t\t\tif (roleId == roleData.id) {\n\t\t\t\tid = roleData.roleId-1001;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.loadImage(`rolePic_${id}`).then((sprf) => {\n\t\t\tthis.ui.roleId.getComponent(cc.Sprite).spriteFrame = sprf;\n\t\t});\n\t}\n}\n//c, 控制\n@ccclass\nexport default class UserInfoPanelCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\n\t@property(cc.Label)\t\t\t\t//玩家UID\n\tuserUID: cc.Label = null;\n\t@property(cc.Label)\t\t\t\t//玩家名称\n\tuserName: cc.Label = null;\n\t@property(cc.Node)\t\t\t\t//左边玩家信息\n\tframe_left: cc.Node = null;\n\t@property(cc.Node)\t\t\t\t//修改昵称界面\n\tmodifyName: cc.Node = null;\n\t@property(cc.SpriteFrame)\t\t//玩家vip等级图片  后期用图集\n\tvipPic: cc.SpriteFrame = null;\n\t@property(cc.Node)\t\t\t\t//玩家显示数据按钮\n\tbtn_data: cc.Node = null;\n\t@property(cc.Node)\t\t\t\t//玩家基础数据\n\tbaseData: cc.Node = null;\n\t@property(cc.Node)\t\t\t\t//玩家战斗数据\n\tbattleData: cc.Node = null;\n\t@property(cc.Node)\t\t\t\t//玩家属性\n\tpropertyData: cc.Node = null;\n\t@property(cc.Node)\t\t\t\t//玩家数据统计\n\tstatisticsData: cc.Node = null;\n\t@property(cc.Button)\t\t\t//关闭玩家信息按钮\n\tbtn_close: cc.Button = null;\n\n\n\tonLoad (){\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model,View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t \tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\",this.ui.btn_modify,this.showModifyName,\"显示修改昵称界面\");\n\t\tthis.connect(\"click\",this.ui.btn_closeModify,this.closeModify,\"关闭昵称界面\");\n\t\tthis.connect(\"editing-did-ended\",this.ui.inputName,this.inputModifyName,\"输入修改的名称\");\n\t\tthis.connect(\"click\",this.ui.btn_modifyName,this.refreshName,\"输入修改的名称\");\n\t\tthis.connect(\"click\",this.ui.btn_close, this.closeUserInfoPanel, \"关闭玩家信息界面\");\n\t\tfor (let i = 0; i < this.ui.btn_data.childrenCount; i++) {\n\t\t\tlet refreshShowData = ()=>{\n\t\t\t\tthis.view.refreshShowData(i);\n\t\t\t}\n\t\t\tthis.connect(\"click\",this.ui.btn_data.children[i],refreshShowData,\"显示对战数据\");\n\t\t}\n\t\t\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t// update(dt) {}\n\n\t//显示修改昵称界面\n\tpublic showModifyName (): void {\n\t\tthis.ui.modifyName.active = true;\n\t}\n\t//关闭修改昵称界面\n\tcloseModify () {\n\t\tthis.ui.modifyName.active = false;\n\t}\n\n\t//输入修改的名称\n\tpublic inputModifyName (editbox: any): void {\n\t\tif (!editbox.string || editbox.string == \"\") {\n\t\t\tthis.model.setModifyState(false);\n\t\t} else {\n\t\t\tthis.model.setModifyState(true);\n\t\t}\n\t}\n\n\t//修改昵称数据并刷新UI\n\tpublic refreshName (): void {\n\t\tif (!this.model.isModifyName) { return }\n\t\tthis.view.refreshName(this.ui.inputName.string);\n\t\tthis.closeModify();\n\t}\n\n\t//关闭玩家信息界面\n\tpublic closeUserInfoPanel (): void {\n\t\tthis.closeModule(\"userInfoPanel\");\n\t}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}