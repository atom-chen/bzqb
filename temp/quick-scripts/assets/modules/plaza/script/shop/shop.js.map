{"version":3,"sources":["shop.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\shop","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\r\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\r\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\r\nimport ShopMgr from \"../../../../manager/public/shopMgr\";\r\nimport { enums } from \"../../../../manager/enums\";\r\nimport GameNet from \"../../../../framework/modules/GameNet\";\r\nimport ModuleMgr from \"../../../../framework/modules/ModuleMgr\";\r\n\r\n\r\n/*\r\nauthor: 蒙磊\r\n日期:2018-11-05 20:15:41\r\n*/\r\n\r\n//MVC模块,\r\nconst { ccclass, property } = cc._decorator;\r\nlet ctrl: ShopCtrl;\r\nlet shopMgr = ShopMgr.getInstance();\r\n//模型，数据处理\r\nclass Model extends BaseModel {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\tpublic shopState: string =null;\r\n\tpublic boxShop: any = []\r\n\tpublic cardShop: any = []\r\n\tpublic goldShop: any = []\r\n\tpublic crystalShop: any = []\r\n\tpublic diamondShop: any = []\r\n\t//刷新时间\r\n\tserverDelay:number =null;\r\n\trefreshEndTime:number=null;\r\n\trefreshTimeText:string=null;\r\n\trefreshTimesText:string=null;\r\n\tinitData() {\r\n\t\tthis.shopState =shopMgr.shopState;\r\n\t\tthis.initBoxData();\r\n\t\tthis.initMoneyData();\r\n\t\tthis.initCrystalData();\r\n\t\tthis.initDiamondData();\r\n\t\tthis.initCardData();\r\n\t}\r\n\tinitBoxData() {\r\n\t\tthis.boxShop = shopMgr.boxShop;\r\n\t}\r\n\tinitCardData() {\r\n\t\tthis.cardShop = shopMgr.cardShop;\r\n\t}\r\n\tinitMoneyData() {\r\n\t\tthis.goldShop = shopMgr.goldShop;\r\n\t}\r\n\tinitCrystalData() {\r\n\t\tthis.crystalShop = shopMgr.crystalShop;\r\n\t}\r\n\tinitDiamondData() {\r\n\t\tthis.diamondShop = shopMgr.diamondShop;\r\n\t}\r\n\tpublic initRefreshTime(){\r\n\t\tthis.serverDelay = GameNet.getInstance().getServerDelay();\r\n\t\tthis.refreshEndTime =shopMgr.cardShopRefreshTime+(enums.Shop_RefreshTime*1000);\r\n\t\tconsole.log(shopMgr.cardShopRefreshTime,enums.Shop_RefreshTime)\r\n\t}\r\n\tpublic initRefreshTimes(){\r\n\t\tthis.refreshTimesText =(20-shopMgr.refreshCount)+\"/20\";\r\n\t}\r\n\tpublic setRefreshTime() {\r\n\t\tlet serverTime = Date.now() + this.serverDelay;\r\n\t\tlet refreshNeedTime = this.refreshEndTime-serverTime;\r\n\t\trefreshNeedTime = refreshNeedTime > 0 ? refreshNeedTime : 0;\r\n\t\tlet hour = Math.floor((refreshNeedTime / 1000) / 3600)\r\n\t\tlet minute = Math.floor(((refreshNeedTime / 1000) % 3600) / 60)\r\n\t\tlet second = Math.floor((refreshNeedTime / 1000) % 60)  \r\n\t\tlet hours = hour >= 10 ? hour : '0' + hour;\r\n\t\tlet minutes = minute >= 10 ? minute : '0' + minute;\r\n\t\tlet seconds = second >= 10 ? second : '0' + second;\r\n\t\t// this.onlineBoxPercent = unlockNeedTime / (this.onlineBox.boxInfo.Onlinetime[this.onlineBox.boxTimes].time * 1000);\r\n\t\tthis.refreshTimeText = hours + \":\" + minutes+\":\"+seconds;\r\n\t}\r\n}\r\n//视图, 界面显示或动画，在这里完成\r\nclass View extends BaseView {\r\n\tprotected model: Model;\r\n\tprotected node: cc.Node;\r\n\r\n\tpublic ui = {\r\n\t\t//在这里声明ui\r\n\t\tbtn_box: ctrl.btn_box,\r\n\t\tbtn_card: ctrl.btn_card,\r\n\t\tbtn_money: ctrl.btn_money,\r\n\t\tbtn_crystal: ctrl.btn_crystal,\r\n\t\tbtn_diamond: ctrl.btn_diamond,\r\n\t\tbtn_back: ctrl.btn_back,\r\n\t\tboxContent: ctrl.boxContent,\r\n\t\tboxShop: ctrl.boxShop,\r\n\t\tmoenyContent: ctrl.moenyContent,\r\n\t\tgoldShop: ctrl.goldShop,\r\n\t\tcrystalShop: ctrl.crystalShop,\r\n\t\tcrystalContent: ctrl.crystalContent,\r\n\t\tdiamondContent: ctrl.diamondContent,\r\n\t\tdiamondShop: ctrl.diamondShop,\r\n\t\tnote_card: ctrl.note_card,\r\n\t\tcardShop: ctrl.cardShop,\r\n\t\tlab_refreshCost: ctrl.lab_refreshCost,\r\n\t\trefreshTimes: ctrl.refreshTimes,\r\n\t\trefreshTime: ctrl.refreshTime,\r\n\t\tbtn_refresh:ctrl.btn_refresh,\r\n\t}\r\n\tconstructor(model) {\r\n\t\tsuper(model);\r\n\t\tthis.node = ctrl.node;\r\n\t\tthis.initUi();\r\n\t}\r\n\tpublic addPrefab(obj_node: cc.Node, obj_Prefab: cc.Prefab) {\r\n\t\treturn this.addPrefabNode(obj_Prefab, obj_node);\r\n\t}\r\n\t//初始化ui\r\n\tpublic initUi() {\r\n\t\tthis.ui.lab_refreshCost.getComponent(cc.Label).string =enums.Shop_RefreshFee.toString();\r\n\t}\r\n\tshowRefreshTime(){\r\n\t\tthis.ui.refreshTimes.getComponent(cc.Label).string =this.model.refreshTimesText;\r\n\t\tthis.ui.refreshTime.getComponent(cc.Label).string =this.model.refreshTimeText;\r\n\t}\r\n\r\n}\r\n//c, 控制\r\n@ccclass\r\nexport default class ShopCtrl extends BaseCtrl {\r\n\tprotected view: View;\r\n\tprotected model: Model;\r\n\t//这边去声明ui组件\r\n\t//btn\r\n\t@property(cc.Node)\r\n\tbtn_box: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tbtn_card: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tbtn_money: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tbtn_crystal: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tbtn_diamond: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tbtn_back: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tbtn_refresh: cc.Node = null;\r\n\r\n\t//note\r\n\t@property(cc.Node)\r\n\tboxContent: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tmoenyContent: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tcrystalContent: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tdiamondContent: cc.Node = null;\r\n\t@property(cc.Node)\r\n\tnote_card: cc.Node = null;\r\n\r\n\t//Prefab\r\n\t@property(cc.Prefab)\r\n\tboxShop: cc.Prefab = null;\r\n\t@property(cc.Prefab)\r\n\tgoldShop: cc.Prefab = null;\r\n\t@property(cc.Prefab)\r\n\tcrystalShop: cc.Prefab = null;\r\n\t@property(cc.Prefab)\r\n\tdiamondShop: cc.Prefab = null;\r\n\t@property(cc.Prefab)\r\n\tcardShop: cc.Prefab = null;\r\n\r\n\t//label\r\n\t@property(cc.Node)\r\n\tlab_refreshCost: cc.Node = null;\r\n\t@property(cc.Node)\r\n\trefreshTimes: cc.Node = null;\r\n\t@property(cc.Node)\r\n\trefreshTime: cc.Node = null;\r\n\r\n\t//声明ui组件end\r\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\r\n\tboxList: any = [];\r\n\tgoldList: any = [];\r\n\tcrustalList: any = [];\r\n\tdiamondList: any = [];\r\n\tcardList: any = [];\r\n\r\n\r\n\tonLoad() {\r\n\t\t// 控制器\r\n\t\tctrl = this;\r\n\t\t// 创建mvc模式中模型和视图\r\n\t\tthis.initMvc(Model, View);\r\n\t\tthis.initData();\r\n\t}\r\n\t//显示回调\r\n\tonEnable(){\r\n\t\t\r\n\t}\r\n\t//定义网络事件\r\n\tprotected defineNetEvents() {\r\n\t\tthis.n_events = {\r\n\t\t\t'plaza.shop.refreshShop': this.refreshShop,\r\n\t\t};\r\n\t}\r\n\t//定义全局事件\r\n\tprotected defineGlobalEvents() {\r\n\t\tthis.g_events = {};\r\n\t}\r\n\t//绑定操作的回调\r\n\tconnectUi() {\r\n\t\tthis.connect(\"click\", this.ui.btn_back, this.back, \"返回\");\r\n\t\tthis.connect(\"click\", this.ui.btn_refresh, this.refresh, \"刷新\");\r\n\t}\r\n\t\r\n\tupdataCardShop() {\r\n\t\tthis.model.initCardData();\r\n\t\tfor (let i = 0; i < this.cardList.length; i++) {\r\n\t\t\tlet obj = this.cardList[i];\r\n\t\t\tlet data = this.model.cardShop;\r\n\t\t\tconsole.log(data[i])\r\n\t\t\tobj.getComponent(\"cardShop\").setData(data[i].price, data[i].amount, data[i].name, data[i].priceType)\r\n\t\t}\r\n\t}\r\n\tRefreshTiming(){\r\n\t\tthis.schedule(timing=>{\r\n\t\t\tthis.model.setRefreshTime();\r\n\t\t\tthis.view.showRefreshTime();\r\n\t\t},1)\r\n\t}\r\n\t//进入哪个商店\r\n\tchoseShop(name) {\r\n\t\tcc.log(name, this.ui[\"btn_\" + name].getComponent(cc.Toggle).isChecked)\r\n\t\t//cc.log(this.ui[\"btn_\"+name].getComponent(cc.Toggle).isChecked)\r\n\t\tthis.ui[\"btn_\" + name].getComponent(cc.Toggle).isChecked = true;\r\n\t}\r\n\tinitData() {\r\n\t\tthis.model.initData();\r\n\t\tthis.btn_box.getComponent(cc.Toggle).isChecked =false;\r\n\t\tconsole.log(\"---宝箱商店---\", this.model.boxShop)\r\n\t\tthis.ui.boxContent.width = (this.model.boxShop.length) * 320\r\n\t\tfor (let i = 0; i < this.model.boxShop.length; i++) {\r\n\t\t\tlet boxShop = this.view.addPrefab(this.ui.boxContent, this.ui.boxShop)\r\n\t\t\tlet cost = this.model.boxShop[i].price.amount;\r\n\t\t\tlet gift = this.model.boxShop[i].gift[0].amount;\r\n\t\t\tboxShop.getComponent('boxShop').setData(cost, gift);\r\n\t\t\tboxShop.setPosition(cc.v2(160 + (i * 320), 0))\r\n\t\t}\r\n\t\tconsole.log(\"---卡片商店---\", this.model.cardShop)\r\n\t\tfor (let i = 0; i < this.model.cardShop.length; i++) {\r\n\t\t\tlet cardShop = this.view.addPrefab(this.ui.note_card, this.ui.cardShop)\r\n\t\t\tlet cost = this.model.cardShop[i].price;\r\n\t\t\tlet count = this.model.cardShop[i].amount;\r\n\t\t\tlet name = this.model.cardShop[i].name;\r\n\t\t\tlet priceType = this.model.cardShop[i].priceType;\r\n\t\t\tlet card = this.model.cardShop[i].card;\r\n\t\t\tcardShop.getComponent('cardShop').setData(cost, count, name, priceType);\r\n\t\t\tcardShop.setPosition(cc.v2(-250 + ((i % 2) * 350), 155 - (Math.floor(i / 2) * 140)))\r\n\t\t\tthis.cardList.push(cardShop)\r\n\t\t}\r\n\t\tconsole.log(\"---金币商店---\", this.model.goldShop)\r\n\t\tthis.ui.moenyContent.width = (this.model.goldShop.length) * 320\r\n\t\tfor (let i = 0; i < this.model.goldShop.length; i++) {\r\n\t\t\tlet goldShop = this.view.addPrefab(this.ui.moenyContent, this.ui.goldShop)\r\n\t\t\tlet cost = this.model.goldShop[i].price.amount;\r\n\t\t\tlet gift = this.model.goldShop[i].gift[0].amount;\r\n\t\t\tlet reward = this.model.goldShop[i].reward[0].amount;\r\n\t\t\tlet name = this.model.goldShop[i].name;\r\n\t\t\tgoldShop.getComponent('goldShop').setData(cost, gift, reward, name);\r\n\t\t\tgoldShop.setPosition(cc.v2(160 + (i * 320), 0))\r\n\t\t}\r\n\t\tconsole.log(\"---粉晶商店---\", this.model.crystalShop)\r\n\t\tthis.ui.crystalContent.width = (this.model.crystalShop.length) * 320\r\n\t\tfor (let i = 0; i < this.model.crystalShop.length; i++) {\r\n\t\t\tlet crystalShop = this.view.addPrefab(this.ui.crystalContent, this.ui.crystalShop)\r\n\t\t\tlet cost = this.model.crystalShop[i].price==null?0:this.model.crystalShop[i].price.amount;\r\n\t\t\tlet gift = this.model.crystalShop[i].gift ? this.model.crystalShop[i].gift[0].amount : 0;\r\n\t\t\tlet reward = this.model.crystalShop[i].reward[0].amount;\r\n\t\t\tlet name = this.model.crystalShop[i].name;\r\n\t\t\tcrystalShop.getComponent('crystalShop').setData(cost, gift, reward, name);\r\n\t\t\tcrystalShop.setPosition(cc.v2(160 + (i * 320), 0))\r\n\t\t}\r\n\t\tconsole.log(\"---砖石商店---\", this.model.diamondShop)\r\n\t\tthis.ui.diamondContent.width = (this.model.diamondShop.length) * 320\r\n\t\tfor (let i = 0; i < this.model.diamondShop.length; i++) {\r\n\t\t\tlet diamondShop = this.view.addPrefab(this.ui.diamondContent, this.ui.diamondShop)\r\n\t\t\tlet cost = this.model.diamondShop[i].Recharge;\r\n\t\t\tlet gift = this.model.diamondShop[i].gift ? this.model.diamondShop[i].gift[0].amount : 0;\r\n\t\t\tlet reward = this.model.diamondShop[i].reward[0].amount;\r\n\t\t\tlet name = this.model.diamondShop[i].name;\r\n\t\t\tdiamondShop.getComponent('diamondShop').setData(cost, gift, reward, name);\r\n\t\t\tdiamondShop.setPosition(cc.v2(160 + (i * 320), 0))\r\n\t\t}\r\n\t\tthis.choseShop(this.model.shopState)\r\n\t\t//计时\r\n\t\tthis.model.initRefreshTime();\r\n\t\tthis.model.setRefreshTime();\r\n\t\tthis.model.initRefreshTimes();\r\n\t\tthis.view.showRefreshTime();\r\n\t\tthis.RefreshTiming();\r\n\t}\r\n\r\n\t//网络事件回调begin\r\n\trefreshShop(){\r\n\t\tthis.updataCardShop();\r\n\t\tthis.model.initRefreshTimes();\r\n\t\tthis.view.showRefreshTime();\r\n\t}\r\n\t//end\r\n\t//全局事件回调begin\r\n\t//end\r\n\t//按钮或任何控件操作的回调begin\r\n\tback() {\r\n\t\tthis.closeModule(\"shop\")\r\n\t}\r\n\topenPrefabCB(name) {\r\n\t\treturn this.openSubModule(name)\r\n\t}\r\n\trefresh(){\r\n\t\tModuleMgr.getInstance().showMsgBox({content:\"是否花费50进行商店刷新？\",okcb:this.sendRefreshMsg})\r\n\t}\r\n\tsendRefreshMsg(){\r\n\t\tshopMgr.reqRefreshShop();\r\n\t}\r\n\t//end\r\n\r\n\t// update(dt) {}\r\n\r\n\tonDestroy() {\r\n\t\tsuper.onDestroy();\r\n\t}\r\n}"]}