{"version":3,"sources":["roleInfo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\role","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport { role } from \"../../../../manager/public/interface/iRole\";\n\n/*\nauthor: 陈斌杰\n日期:2018-11-14 19:57:33\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: RoleInfoCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tpublic roleData: role = <role>{};\n\n\tpublic setRoleData(data: any): void {\n\t\tthis.roleData = data;\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\trolePic: ctrl.rolePic,\n\t\tlock: ctrl.lock,\n\t\tbtn_showRole: ctrl.btn_showRole,\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\t\tthis.ui.lock.active = true;\n\t}\n\n\t//初始化角色UI\n\tpublic initRoleUI(): void {\n\t\tthis.ui.lock.active = !this.model.roleData.isUnlock;\n\t\tthis.setRoleIco();\n\t}\n\n\t//修改角色Ico\n\tpublic setRoleIco(): void {\n\t\tlet id = (this.model.roleData.roleId-1001).toString();\n\t\tthis.loadImage(`roleIco_${id}`).then((sprf)=>{\n\t\t\tthis.ui.rolePic.getComponent(cc.Sprite).spriteFrame = sprf;\n\t\t});\n\t}\n}\n//c, 控制\n@ccclass\nexport default class RoleInfoCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Node)\n\trolePic: cc.Node = null;\n\t@property(cc.Node)\n\tlock: cc.Node = null;\n\t@property(cc.Button)\n\tbtn_showRole: cc.Button = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\",this.ui.btn_showRole,()=>{\n\t\t\tthis.gemit(\"refreshRolePic\",this.model.roleData);\n\t\t},\"点击显示角色\");\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t//初始化角色\n\tpublic initRole(data: any): void {\n\t\tthis.model.setRoleData(data);\n\t\tthis.view.initRoleUI();\n\t}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}