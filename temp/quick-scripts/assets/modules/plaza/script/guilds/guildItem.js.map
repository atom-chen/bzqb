{"version":3,"sources":["guildItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\guilds","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\r\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\r\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\r\nimport GuildsMgr from \"../../../../manager/public/guildsMgr\";\r\n\r\n/*\r\nauthor: 汤凯\r\n日期:2018-11-19 15:25:14\r\n*/\r\n\r\n//MVC模块,\r\nconst { ccclass, property } = cc._decorator;\r\nlet ctrl: GuildsItemCtrl;\r\n//模型，数据处理\r\nclass Model extends BaseModel {\r\n\tguildItem = null;\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n}\r\n//视图, 界面显示或动画，在这里完成\r\nclass View extends BaseView {\r\n\tprotected model: Model;\r\n\tprotected node: cc.Node;\r\n\tpublic ui={\r\n\t\tspr_guildIcon: ctrl.spr_guildIcon,\r\n\t\tspr_guildRankIcon: ctrl.spr_guildRankIcon,\r\n\t\tlbl_guildName: ctrl.lbl_guildName,\r\n\t\tlbl_guildPlayerCount: ctrl.lbl_guildPlayerCount,\r\n\t\tlbl_guildEnterType: ctrl.lbl_guildEnterType,\r\n\t\tlbl_guildRankName: ctrl.lbl_guildRankName,\r\n\t}\r\n\tconstructor(model){\r\n\t\tsuper(model);\r\n\t\tthis.node = ctrl.node;\r\n\t\tthis.initUi();\r\n\t}\r\n\t//初始化ui\r\n\tpublic initUi() {\r\n\r\n\t}\r\n\tshowGuildItem()\r\n\t{\r\n\t\tif(this.model.guildItem) {\r\n\t\t\tthis.ui.lbl_guildName.string = this.model.guildItem.name;\r\n\t\t\tthis.ui.lbl_guildPlayerCount.string = this.model.guildItem.memberAmount+\"/\";\r\n\t\t\tthis.ui.lbl_guildEnterType.string = this.model.guildItem.enterType;\r\n\t\t\tthis.ui.lbl_guildRankName.string = this.model.guildItem.neededStage;\r\n\t\t\t// this.ui.spr_guildIcon\r\n\t\t\t// this.ui.spr_guildRankIcon \r\n\t\t}\r\n\t}\r\n}\r\n//c, 控制\r\n@ccclass\r\nexport default class GuildsItemCtrl extends BaseCtrl {\r\n\tprotected view: View;\r\n\tprotected model: Model;\r\n\t//这边去声明ui组件\r\n\t@property(cc.Sprite)\r\n\tspr_guildIcon: cc.Sprite = null;\r\n\t@property(cc.Sprite)\r\n\tspr_guildRankIcon: cc.Sprite = null;\r\n\t@property(cc.Label)\r\n\tlbl_guildName: cc.Label = null;\r\n\t@property(cc.Label)\r\n\tlbl_guildPlayerCount: cc.Label = null;\r\n\t@property(cc.Label)\r\n\tlbl_guildEnterType: cc.Label = null;\r\n\t@property(cc.Label)\r\n\tlbl_guildRankName: cc.Label = null;\r\n\t//声明ui组件end\r\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\r\n\r\n\r\n\tonLoad (){\r\n\t\t// 控制器\r\n\t\tctrl = this;\r\n\t\t// 创建mvc模式中模型和视图\r\n\t\tthis.initMvc(Model,View);\r\n\t}\r\n\r\n\t//定义网络事件\r\n\tprotected defineNetEvents() {\r\n\t \tthis.n_events = {};\r\n\t}\r\n\t//定义全局事件\r\n\tprotected defineGlobalEvents() {\r\n\t\tthis.g_events = {};\r\n\t}\r\n\t//绑定操作的回调\r\n\tconnectUi() {\r\n\t\tthis.connect(\"click\",this.node.getChildByName('clippingNode'),this.guildItemClick.bind(this),\"点击公会界面\");\r\n\t}\r\n\tupdateAndShowGuildItem(data)\r\n\t{\r\n\t\tconsole.log('updateAndShowGuildItem',data)\r\n\t\tthis.model.guildItem = data;\r\n\t\tthis.view.showGuildItem();\r\n\t}\r\n\tguildItemClick()\r\n\t{\r\n\t\t//请求明细数据\r\n\t\tGuildsMgr.getInstance().reqGuildDetail(this.model.guildItem.id);\r\n\t\tGuildsMgr.getInstance().reqGuildMembers(this.model.guildItem.id,0)\r\n\t\tconsole.log('guildItemClick')\r\n\t\tthis.closeModule(\"guilds\");\r\n\t\tthis.openSubModule('guildsInfo');\r\n\t}\r\n\t//网络事件回调begin\r\n\t//end\r\n\t//全局事件回调begin\r\n\t//end\r\n\t//按钮或任何控件操作的回调begin\r\n\t//end\r\n\r\n\t// update(dt) {}\r\n\r\n\tonDestroy() {\r\n\t\tsuper.onDestroy();\r\n\t}\r\n}"]}