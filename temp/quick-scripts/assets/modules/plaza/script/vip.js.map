{"version":3,"sources":["vip.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script","sourcesContent":["import BaseModel from \"../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../framework/baseClass/BaseCtrl\";\nimport VipMgr from \"../../../manager/public/vipMgr\";\nimport UserMgr from \"../../../manager/public/userMgr\";\nimport ShopMgr from \"../../../manager/public/shopMgr\";\nimport ModuleMgr from \"../../../framework/modules/ModuleMgr\";\n/*\nauthor: 蒙磊\n日期:2018-11-09 15:55:04\n*/\n//MVC模块,\nenum VIP {\n\tV1 = 0,\n\tV2,\n\tV3,\n\tV4,\n\tV5,\n\tV6,\n\tV7,\n\tV8,\n\tV9,\n}\n\nconst { ccclass, property } = cc._decorator;\nlet ctrl: VipCtrl;\nlet vipMgr = VipMgr.getInstance();\nlet userMgr = UserMgr.getInstance();\n//模型，数据处理\nclass Model extends BaseModel {\n\t//获取的信息\n\tpublic curVipLevel: number = null;\n\tpublic vip: any = [];\n\tpublic userVip: any = null;\n\tpublic vipLevel: number = null;\n\tpublic vipWeekPrizeInfo: any = null;\n\tpublic vipGiftInfo: any = null;\n\t//显示信息\n\tpublic vipShopText: string = null;\n\tpublic vipWelfareText: string = null;\n\tpublic vipExeText: string = null;\n\tpublic vipNeedText: string = null;\n\tpublic vipNextLevelText: string = null;\n\tpublic vipExePercent: number = 0;//进度条百分比\n\tconstructor() {\n\t\tsuper();\n\t}\n\tinitData() {\n\t\tthis.vip = vipMgr.vip;\n\t\tthis.vipLevel = vipMgr.vipLv\n\t\tthis.userVip = this.vip[this.vipLevel]\n\t\tthis.vipWeekPrizeInfo = vipMgr.vipWeekPrizeInfo;\n\t\tthis.vipGiftInfo = vipMgr.vipGiftInfo;\n\t}\n\tsetVipShopText(index) {\n\t\tthis.vipShopText = 'VIP' + (index + 1) + \"礼包\"\n\t}\n\tsetvipWelfareText(index) {\n\t\tthis.vipWelfareText = 'VIP' + (index + 1) + \"福利\"\n\t}\n\tsetExeData() {\n\t\tlet curExe = vipMgr.vipScore;\n\t\tif (this.userVip) {\n\t\t\tlet targetExe = this.userVip.recharge;\n\t\t\tthis.vipExeText = curExe + \"/\" + targetExe;\n\t\t\tthis.vipNeedText = '再充值' + (targetExe - curExe);\n\t\t\tthis.vipNextLevelText = '可升级v' + (this.vipLevel + 1)\n\t\t\tthis.vipExePercent = curExe / targetExe;\n\t\t}\n\t\telse {\n\t\t\tthis.vipExeText = curExe + \"/---\" ;\n\t\t\tthis.vipNeedText=\"\"\n\t\t\tthis.vipNextLevelText =\"您已达到最高vip等级\"\n\t\t\tthis.vipExePercent = 1;\n\t\t}\n\t}\n\tsetText(name, text) {\n\t\tthis[name] = text;\n\t}\n\tsetCurVipLevel(level) {\n\t\tthis.curVipLevel = level;\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\t//在这里声明ui\n\t\tbtn_close: ctrl.btn_close,\n\t\t//note\n\t\tnote_vip: ctrl.note_vip,\n\t\t//label\n\t\tlab_des: ctrl.lab_des,\n\t\tlab_vipShopText: ctrl.lab_vipShopText,\n\t\tlab_vipWelfareText: ctrl.lab_vipWelfareText,\n\t\tlab_exe: ctrl.lab_exe,\n\t\tlab_need: ctrl.lab_need,\n\t\tlab_nextLevel: ctrl.lab_nextLevel,\n\t\tlab_cost: ctrl.lab_cost,\n\t\t//sprite\n\t\tsp_vipExePercent: ctrl.sp_vipExePercent,\n\t\tsp_vipIcon: ctrl.sp_vipIcon,\n\t\t//button\n\t\tbtn_treasureBox: ctrl.btn_treasureBox,\n\t\tbtn_welfareBox: ctrl.btn_welfareBox,\n\t\tbtn_buy: ctrl.btn_buy,\n\t\tbtn_receive: ctrl.btn_receive,\n\t\tbtn_recharge: ctrl.btn_recharge,\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\n\tshowIcon(name) {\n\t\tvar SPF = this.getImageSync(name)\n\t\tthis.ui.sp_vipIcon.spriteFrame = SPF;\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\n\t}\n\tshowLabelString(obj: cc.Label, content: string) {\n\t\tobj.string = content;\n\t}\n\t//显示进度条\n\tshowProgress(obj: cc.Sprite, percent: number) {\n\t\tobj.fillRange = percent;\n\t}\n}\n//c, 控制\n@ccclass\nexport default class VipCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Node)\n\tbtn_close: cc.Node = null;\n\t//note\n\t@property(cc.Node)\n\tnote_vip: cc.Node = null;\n\n\t//label\n\t@property(cc.Node)\n\tlab_des: cc.Node = null;\n\t@property(cc.Node)\n\tlab_vipShopText: cc.Node = null;\n\t@property(cc.Node)\n\tlab_vipWelfareText: cc.Node = null;\n\t@property(cc.Node)\n\tlab_exe: cc.Node = null;\n\t@property(cc.Node)\n\tlab_need: cc.Node = null;\n\t@property(cc.Node)\n\tlab_nextLevel: cc.Node = null;\n\t@property(cc.Node)\n\tlab_cost: cc.Node = null;\n\t//button\n\t@property(cc.Node)\n\tbtn_treasureBox: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_welfareBox: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_buy: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_receive: cc.Node = null;\n\t@property(cc.Node)\n\tbtn_recharge: cc.Node = null;\n\t//sprite\n\t@property(cc.Sprite)\n\tsp_vipIcon: cc.Sprite = null;\n\t@property(cc.Node)\n\tsp_vipExePercent: cc.Node = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t\tvipMgr.initData();\n\t\tthis.initData();\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {\n\t\t\t'plaza.vip.recVipWeekPrize': this.recVipWeekPrize,\n\t\t\t'plaza.vip.buyVipGift': this.buyVipGift,\n\t\t};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.ui.btn_close, this.close, \"关闭\");\n\t\tfor (let i = 0; i < this.ui.note_vip.childrenCount; i++) {\n\t\t\tthis.connect(\"click\", this.ui.note_vip.children[i], () => {\n\t\t\t\tthis.choseVip(i)\n\t\t\t}, \"选中vip\");\n\t\t}\n\t\tthis.connect(\"click\", this.ui.btn_recharge, () => {\n\t\t\tShopMgr.getInstance().setShopState(\"diamond\")\n\t\t\tif (ShopMgr.getInstance().isInitShop) {\n\t\t\t\tthis.openSubModule(\"shop\").then((obj) => {\n\t\t\t\t\tobj.choseShop(\"diamond\")\n\t\t\t\t})\n\t\t\t}\n\t\t\telse {\n\t\t\t\tShopMgr.getInstance().reqShopInfo();\n\t\t\t}\n\t\t}, \"打开砖石商店\");\n\t\tthis.connect(\"click\", this.ui.btn_receive, this.receive, \"领取周宝箱\");\n\t\tthis.connect(\"click\", this.ui.btn_buy, this.buy, \"购买宝箱\");\n\t}\n\t//网络事件回调begin\n\trecVipWeekPrize() {\n\t\tthis.model.initData();\n\t\tthis.btn_receive.getComponent(cc.Button).interactable = false;\n\t\tModuleMgr.getInstance().showGainBox(vipMgr.dictItemInfo)\n\t}\n\tbuyVipGift() {\n\t\tthis.model.initData();\n\t\tthis.btn_buy.getComponent(cc.Button).interactable = false;\n\t\tModuleMgr.getInstance().showGainBox(vipMgr.vipGift)\n\t}\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\tinitData() {\n\t\tthis.model.initData();\n\t\tthis.note_vip.children[0].getComponent(cc.Toggle).isChecked =false;\n\t\tlet level = this.model.vipLevel == 0 ? 0 : this.model.vipLevel - 1;\n\t\tthis.note_vip.children[level].getComponent(cc.Toggle).isChecked = true;\n\t\tthis.choseVip(level)\n\t\tthis.model.setExeData();\n\t\tthis.view.showIcon(\"vip_\" + this.model.vipLevel)\n\t\tthis.view.showLabelString(this.ui.lab_exe.getComponent(cc.Label), this.model.vipExeText)\n\t\tthis.view.showLabelString(this.ui.lab_need.getComponent(cc.Label), this.model.vipNeedText)\n\t\tthis.view.showLabelString(this.ui.lab_nextLevel.getComponent(cc.Label), this.model.vipNextLevelText)\n\t\tthis.view.showProgress(this.ui.sp_vipExePercent.getComponent(cc.Sprite), this.model.vipExePercent)\n\t}\n\tchoseVip(index: number) {\n\t\tthis.model.setCurVipLevel(index + 1)\n\t\tthis.model.setVipShopText(index);\n\t\tthis.model.setvipWelfareText(index);\n\t\tthis.setShopBox(index)\n\t\tthis.setWelfareBox(index)\n\t\tthis.view.showLabelString(this.ui.lab_cost.getComponent(cc.Label), this.model.vip[index].price.toString())\n\t\tthis.view.showLabelString(this.ui.lab_des.getComponent(cc.Label), this.model.vip[index].des)\n\t\tthis.view.showLabelString(this.ui.lab_vipShopText.getComponent(cc.Label), this.model.vipShopText)\n\t\tthis.view.showLabelString(this.ui.lab_vipWelfareText.getComponent(cc.Label), this.model.vipWelfareText)\n\t}\n\tsetShopBox(index: number) {\n\t\tif (index + 1 > this.model.vipLevel) {\n\t\t\tthis.btn_buy.getComponent(cc.Button).interactable = false;\n\t\t}\n\t\telse if (this.model.vipGiftInfo[index + 1]) {\n\t\t\tthis.btn_buy.getComponent(cc.Button).interactable = false;\n\t\t}\n\t\telse {\n\t\t\tthis.btn_buy.getComponent(cc.Button).interactable = true;\n\t\t}\n\t}\n\tsetWelfareBox(index: number) {\n\t\tif (index + 1 > this.model.vipLevel) {\n\t\t\tthis.btn_receive.getComponent(cc.Button).interactable = false;\n\t\t}\n\t\telse if (this.model.vipWeekPrizeInfo[index + 1]) {\n\t\t\tthis.btn_receive.getComponent(cc.Button).interactable = false;\n\t\t}\n\t\telse {\n\t\t\tthis.btn_receive.getComponent(cc.Button).interactable = true;\n\t\t}\n\t}\n\t//领取周宝箱\n\treceive() {\n\t\tvipMgr.sendRecVipWeekPrize(this.model.curVipLevel)\n\t}\n\tbuy() {\n\t\tvipMgr.sendBuyVipGift(this.model.curVipLevel)\n\t}\n\t// update(dt) {}\n\tclose() {\n\t\tthis.closeModule(\"vip\")\n\t}\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}