{"version":3,"sources":["effect.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\effects","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport { effect, effectOther } from \"../../../../manager/public/interface/iEffect\";\n\n/*\nauthor: 陈斌杰\n日期:2018-11-07 18:48:54\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: EffectCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tpublic effect: effect = <effect>{};\n\n\t//初始化特技数据\n\tpublic initEffect (data: any): void {\n\t\tthis.effect.name = data.name;\n\t\tthis.effect.type = data.type;\n\t\tthis.effect.explain = data.explain;\n\t\tthis.effect.id = data.id;\n\t\tthis.effect.itemId = data.itemId;\n\t\tthis.effect.lv = data.lv;\n\t\tthis.effect.star = data.star;\n\t\tthis.effect.damage = data.damage;\n\t\tthis.effect.energy = data.energy;\n\t\tthis.effect.effectOther = data.effectOther;\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui={\n\t\tcard: ctrl.card,\n\t\tcardCount: ctrl.cardCount,\n\t\tcardEnergy: ctrl.cardEnergy,\n\t\tcardLv: ctrl.cardLv,\n\t\tstars: ctrl.stars,\n\t\tbtn_info: ctrl.btn_info,\n\t}\n\tconstructor(model){\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\t\t\n\t}\n\n\t//初始化特技UI\n\tpublic initEffectUi (): void {\n\t\tvar effect = this.model.effect;\n\t\tthis.ui.cardEnergy.string = effect.energy.toString();\n\t\tthis.ui.cardLv.string = \"等级\"+effect.lv.toString();\n\t\tthis.ui.cardCount.string = effect.effectOther.effectChipNum.toString() + \"/\" + effect.effectOther.upEffectChipNmu.toString();\n\t\tfor (let i = 0; i < this.ui.stars.childrenCount; i++) {\n\t\t\tif (i+1 <= effect.star) {\n\t\t\t\tthis.ui.stars.children[i].active = true;\n\t\t\t} else {\n\t\t\t\tthis.ui.stars.children[i].active = false;\n\t\t\t}\n\t\t}\n\t\tif (!this.model.effect.effectOther.isUnlock) {\n\t\t\tlet spArr = this.node.getComponentsInChildren(cc.Sprite);\n\t\t\tfor (let i = 0; i < spArr.length; ++i) {\n\t\t\t\tspArr[i].setState(cc.Sprite.State.GRAY);\n\t\t\t}\n\t\t}\n\n\t}\n}\n//c, 控制\n@ccclass\nexport default class EffectCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Node)\n\tcard: cc.Node = null;\n\t@property(cc.Label)\n\tcardCount: cc.Label = null;\n\t@property(cc.Label)\n\tcardEnergy: cc.Label = null;\n\t@property(cc.Label)\n\tcardLv: cc.Label = null;\n\t@property(cc.Node)\n\tstars: cc.Node = null;\n\t@property(cc.Button)\n\tbtn_info: cc.Button = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad (){\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model,View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t \tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\",this.ui.btn_info,this.openEffectInfo,\"显示特技信息\");\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t//初始化特技数据\n\tpublic initEffectData (data: any): void {\n\t\tthis.model.initEffect(data);\n\t\tthis.view.initEffectUi();\n\t}\n\n\t//打开特技信息预制\n\tpublic openEffectInfo (): void {\n\t\tthis.openSubModule(\"effectInfo\").then((obj)=>{\n\t\t\tobj.initEffectInfo(this.model.effect);\n\t\t});\n\t}\n\n\t// update(dt) {}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}