{"version":3,"sources":["effectInfo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\modules\\plaza\\script\\effects","sourcesContent":["import BaseModel from \"../../../../framework/baseClass/BaseModel\";\nimport BaseView from \"../../../../framework/baseClass/BaseView\";\nimport BaseCtrl from \"../../../../framework/baseClass/BaseCtrl\";\nimport { effect } from \"../../../../manager/public/interface/iEffect\";\nimport EffectMgr from \"../../../../manager/public/effectMgr\";\nimport UserMgr from \"../../../../manager/public/userMgr\";\n\n/*\nauthor: 陈斌杰\n日期:2018-11-08 10:28:28\n*/\n\n//MVC模块,\nconst { ccclass, property } = cc._decorator;\nlet ctrl: EffectInfoCtrl;\n//模型，数据处理\nclass Model extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t}\n\tpublic effect: effect = <effect>{};\n\tpublic interimCfg: any = EffectMgr.getInstance().interimCfg;\n\tpublic money: any = UserMgr.getInstance().userMoney;\n\n\t//初始化特技信息数据\n\tpublic initEffectInfo(data: any): void {\n\t\tthis.effect = data;\n\t}\n\n\t//根据特技是否解锁设置是否可以加入配置或者升级\n\tpublic isCanAddEffectByUnlock(): boolean {\n\t\treturn this.effect.effectOther.isUnlock;\n\t}\n\n\t//根据当前持有的碎片判断是否可以升级特技\n\tpublic isCanUpEffectByChipNum(): boolean {\n\t\tif (this.effect.effectOther.effectChipNum >= this.effect.effectOther.upEffectChipNmu) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t//根据玩家身上的金钱判断是否可以升级特技\n\tpublic isCanUpEffectByMoney(): boolean {\n\t\tif (this.money.gold >= this.effect.effectOther.spendGold) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t//根据配置的特技Id设置是否可以加入配置\n\tpublic isCanAddEffectById(): boolean {\n\t\tfor (let i = 0; i < this.interimCfg.length; i++) {\n\t\t\tif (this.effect.itemId == this.interimCfg[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t//根据配置的特技数量设置是否可以加入配置\n\tpublic isCanAddEffectByNum(): boolean {\n\t\tlet effectNum = EffectMgr.getInstance().effectNum;\n\t\tlet allEffectNum = EffectMgr.getInstance().allEffectNum;\n\t\tif (effectNum >= allEffectNum) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n}\n//视图, 界面显示或动画，在这里完成\nclass View extends BaseView {\n\tprotected model: Model;\n\tprotected node: cc.Node;\n\tpublic ui = {\n\t\tlevel: ctrl.top.getChildByName(\"lv\").getComponent(cc.Label),\t\t\t//等级\n\t\tname: ctrl.top.getChildByName(\"name\").getComponent(cc.Label),\t\t\t//名称\n\t\tenergy: ctrl.energy,\t\t\t\t\t\t\t\t\t\t\t\t\t//能量\n\t\tstars: ctrl.stars,\t\t\t\t\t\t\t\t\t\t\t\t\t\t//星级\n\t\ttype: ctrl.type,\t\t\t\t\t\t\t\t\t\t\t\t\t\t//能量\n\t\texplain: ctrl.explain,\t\t\t\t\t\t\t\t\t\t\t\t\t//技能说明\n\t\tdamage: ctrl.damage,\t\t\t\t\t\t\t\t\t\t\t\t\t//伤害\n\t\texp: ctrl.exp,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//可获得的经验\n\t\tbtn_upLv: ctrl.btn_upLv,\t\t\t\t\t\t\t\t\t\t\t\t//升级按钮\n\t\tbtn_addCfg: ctrl.btn_addCfg,\t\t\t\t\t\t\t\t\t\t\t//加入配置按钮\n\t\tbtn_close: ctrl.btn_close,\t\t\t\t\t\t\t\t\t\t\t\t//特技信息关闭按钮\n\t\tupLv_lab: ctrl.upLv_lab,\t\t\t\t\t\t\t\t\t\t\t\t//特技信息升级文本\n\t\tcardPiece: ctrl.cardPiece,\t\t\t\t\t\t\t\t\t\t\t\t//特技碎片数量\n\t}\n\tconstructor(model) {\n\t\tsuper(model);\n\t\tthis.node = ctrl.node;\n\t\tthis.initUi();\n\t}\n\t//初始化ui\n\tpublic initUi() {\n\n\t}\n\n\t//初始化特技UI\n\tpublic initEffectInfoUi(): void {\n\t\tlet effect = this.model.effect;\n\t\tthis.ui.level.string = effect.lv.toString() + \"级\";\n\t\tthis.ui.name.string = effect.name;\n\t\tthis.ui.energy.string = effect.energy.toString();\n\t\tfor (let i = 0; i < this.ui.stars.childrenCount; i++) {\n\t\t\tif (i + 1 <= effect.star) {\n\t\t\t\tthis.ui.stars.children[i].active = true;\n\t\t\t} else {\n\t\t\t\tthis.ui.stars.children[i].active = false;\n\t\t\t}\n\t\t}\n\t\tif (effect.type == 1) {\n\t\t\tthis.ui.type.string = \"法术\";\n\t\t} else {\n\t\t\tthis.ui.type.string = \"物理\";\n\t\t}\n\t\tthis.ui.explain.string = effect.explain;\n\t\tthis.ui.damage.string = \"伤害增加\" + effect.damage.toString();\n\t\tthis.ui.exp.string = effect.effectOther.getExp.toString();\n\t\tthis.ui.upLv_lab.string = effect.effectOther.spendGold.toString();\n\t\tthis.ui.cardPiece.getChildByName(\"chipNum\").getComponent(cc.Label).string = effect.effectOther.effectChipNum + \"/\" + effect.effectOther.upEffectChipNmu;\n\n\t\tthis.isShowAddConfigBtn();\n\t}\n\n\t//特技升级按钮是否可点击显示\n\tpublic isShowUpEffectBtn(): void {\n\t\t//特技是否解锁\n\t\tthis.ui.btn_upLv.interactable = this.model.isCanAddEffectByUnlock();\n\t\tif (!this.model.isCanAddEffectByUnlock()) {\n\t\t\treturn;\n\t\t}\n\n\t\t//碎片是否满足升级\n\t\tthis.ui.btn_upLv.interactable = this.model.isCanUpEffectByChipNum();\n\t\tif (!this.model.isCanAddEffectByUnlock()) {\n\t\t\treturn;\n\t\t}\n\n\t\t//金钱是否满足升级\n\t\tthis.ui.btn_upLv.interactable = this.model.isCanUpEffectByMoney();\n\t}\n\n\t//加入配置按钮是否可点击显示\n\tpublic isShowAddConfigBtn(): void {\n\n\t\t//特技是否解锁\n\t\tthis.ui.btn_addCfg.interactable = this.model.isCanAddEffectByUnlock();\n\t\tif (!this.model.isCanAddEffectByUnlock()) {\n\t\t\treturn;\n\t\t}\n\n\t\t//配置栏配置的特技是否已满\n\t\tthis.ui.btn_addCfg.interactable = this.model.isCanAddEffectByNum();\n\t\tif (!this.model.isCanAddEffectByNum()) {\n\t\t\treturn;\n\t\t}\n\n\t\t//配置栏中是否存在\n\t\tthis.ui.btn_addCfg.interactable = this.model.isCanAddEffectById();\n\t}\n}\n//c, 控制\n@ccclass\nexport default class EffectInfoCtrl extends BaseCtrl {\n\tprotected view: View;\n\tprotected model: Model;\n\t//这边去声明ui组件\n\t@property(cc.Node)\n\ttop: cc.Node = null;\n\t@property(cc.Label)\n\tenergy: cc.Label = null;\n\t@property(cc.Node)\n\tstars: cc.Node = null;\n\t@property(cc.Label)\n\ttype: cc.Label = null;\n\t@property(cc.Label)\n\texplain: cc.Label = null;\n\t@property(cc.Label)\n\tdamage: cc.Label = null;\n\t@property(cc.Label)\n\texp: cc.Label = null;\n\t@property(cc.Button)\n\tbtn_upLv: cc.Button = null;\n\t@property(cc.Button)\n\tbtn_addCfg: cc.Button = null;\n\t@property(cc.Node)\n\tbtn_close: cc.Node = null;\n\t@property(cc.Label)\n\tupLv_lab: cc.Label = null;\n\t@property(cc.Node)\n\tcardPiece: cc.Node = null;\n\t//声明ui组件end\n\t//这是ui组件的map,将ui和控制器或试图普通变量分离\n\n\n\tonLoad() {\n\t\t// 控制器\n\t\tctrl = this;\n\t\t// 创建mvc模式中模型和视图\n\t\tthis.initMvc(Model, View);\n\t}\n\n\t//定义网络事件\n\tprotected defineNetEvents() {\n\t\tthis.n_events = {};\n\t}\n\t//定义全局事件\n\tprotected defineGlobalEvents() {\n\t\tthis.g_events = {};\n\t}\n\t//绑定操作的回调\n\tconnectUi() {\n\t\tthis.connect(\"click\", this.ui.btn_close, () => {\n\t\t\tthis.closeModule(\"effectInfo\");\n\t\t}, \"关闭特技信息界面\");\n\t\tthis.connect(\"click\", this.ui.btn_upLv, () => {\n\t\t\tEffectMgr.getInstance().sendReqUpEffect(this.model.effect.id);\n\t\t}, \"点击特技升级按钮\" + this.model.effect.itemId);\n\t\tthis.connect(\"click\", this.ui.btn_addCfg, () => {\n\t\t\tthis.closeModule(\"effectInfo\");\n\t\t\tthis.gemit(\"btn_addEffectConfig\", this.model.effect.itemId);\n\t\t}, \"点击特技加入配置按钮\" + this.model.effect);\n\t}\n\t//网络事件回调begin\n\t//end\n\t//全局事件回调begin\n\t//end\n\t//按钮或任何控件操作的回调begin\n\t//end\n\n\t//初始化特技信息\n\tpublic initEffectInfo(data: any): void {\n\t\tthis.model.initEffectInfo(data);\n\t\tthis.view.initEffectInfoUi();\n\t}\n\n\tonDestroy() {\n\t\tsuper.onDestroy();\n\t}\n}"]}