{"version":3,"sources":["dataMgr.ts"],"names":[],"mappings":";;;;;AAAA,6DAAwD;AACxD,uDAAsD;AAEtD,qCAAgC;AAChC,yCAAoC;AACpC,qCAAgC;AAEhC;IAAqC,2BAAO;IASxC;QAAA,YACI,iBAAO,SAeV;QAdG,KAAI,CAAC,MAAM,GAAG;YACV,iBAAO,CAAC,iBAAiB;YACzB,iBAAO,CAAC,kBAAkB;YAC1B,iBAAO,CAAC,gBAAgB;YACxB,iBAAO,CAAC,aAAa;YACrB,iBAAO,CAAC,kBAAkB;YAC1B,iBAAO,CAAC,iBAAiB;YACzB,iBAAO,CAAC,gBAAgB;YACxB,iBAAO,CAAC,eAAe;YACvB,iBAAO,CAAC,mBAAmB;YAC3B,iBAAO,CAAC,mBAAmB;YAC3B,iBAAO,CAAC,sBAAsB;YAC9B,iBAAO,CAAC,oBAAoB;SAC/B,CAAA;;IACL,CAAC;IAvBa,mBAAW,GAAzB;QACI,IAAI,OAAO,CAAC,SAAS,IAAI,IAAI,EAAE;YAC3B,OAAO,CAAC,SAAS,GAAG,IAAI,OAAO,EAAE,CAAC;SACrC;QACD,OAAO,OAAO,CAAC,SAAS,CAAC;IAC7B,CAAC;IAoBM,0BAAQ,GAAf,UAAgB,KAAa,EAAE,GAAY;QACvC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACzC,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,GAAG,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;YACtD,IAAI,IAAI,IAAI,IAAI;gBAAE,iBAAO,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAE,QAAQ;YACxE,IAAI,EAAE,IAAI,iBAAO,CAAC,gBAAgB,IAAI,IAAI,IAAI,IAAI,EAAE,EAAY,QAAQ;gBACpE,mBAAS,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBACpD,iBAAO,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACrD;YACD,IAAI,EAAE,IAAI,iBAAO,CAAC,eAAe,IAAI,IAAI,IAAI,IAAI,EAAE;gBAC/C,KAAK,IAAI,GAAC,GAAG,CAAC,EAAE,GAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,EAAE,EAAE;oBAClC,iBAAO,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,EAAE,EAAE,IAAI,CAAC,GAAC,CAAC,CAAC,CAAC;oBAC/C,mBAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,GAAC,CAAC,CAAC,SAAS,CAAC,CAAC;iBACxD;aACJ;YACD,IAAI,EAAE,IAAI,iBAAO,CAAC,oBAAoB,IAAI,IAAI,IAAI,IAAI,EAAE;gBACpD,iBAAO,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBAC3C,OAAO,CAAC,GAAG,CAAC,mBAAS,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,CAAA;gBAC3C,IAAI,mBAAS,CAAC,WAAW,EAAE,CAAC,MAAM,EAAE;oBAChC,mBAAS,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;iBAChD;aACJ;SAEJ;IACL,CAAC;IAjDc,iBAAS,GAAY,IAAI,CAAC;IAkD7C,cAAC;CAnDD,AAmDC,CAnDoC,iBAAO,GAmD3C;kBAnDoB,OAAO","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\manager\\public","sourcesContent":["import BaseMgr from \"../../framework/baseClass/BaseMgr\";\r\nimport { dataids } from \"../../framework/net/dataids\";\r\nimport Package from \"../../framework/net/package\";\r\nimport UserMgr from \"./userMgr\";\r\nimport EffectMgr from \"./effectMgr\";\r\nimport RoleMgr from \"./roleMgr\";\r\n\r\nexport default class DataMgr extends BaseMgr {\r\n    private static _instance: DataMgr = null;\r\n    public static getInstance(): DataMgr {\r\n        if (DataMgr._instance == null) {\r\n            DataMgr._instance = new DataMgr();\r\n        }\r\n        return DataMgr._instance;\r\n    }\r\n    private _idArr: number[];\r\n    constructor() {\r\n        super();\r\n        this._idArr = [\r\n            dataids.ID_USER_MONEYGOLD,\r\n            dataids.ID_USER_MONEYSTONE,\r\n            dataids.ID_USER_MONEYFEN,\r\n            dataids.ID_USRE_LEVEL,\r\n            dataids.ID_USRE_EXPERIENCE,\r\n            dataids.ID_GET_MONEY_GOLD,\r\n            dataids.ID_GET_MAILITEMS,\r\n            dataids.ID_GET_BOXPRIZE,\r\n            dataids.ID_GET_WEEKVIPPRIZE,\r\n            dataids.ID_DOSIGNIN_RECINFO,\r\n            dataids.ID_MULTISIGNIN_RECINFO,\r\n            dataids.ID_GET_ALLTYPE_ITEMS,\r\n        ]\r\n    }\r\n\r\n    public dealResp(route: string, msg: Package): void {\r\n        for (let i = 0; i < this._idArr.length; ++i) {\r\n            let id = this._idArr[i], data = msg.getDataByType(id);\r\n            if (data != null) UserMgr.getInstance().refreshData(id, data);  //刷新玩家数据\r\n            if (id == dataids.ID_GET_MAILITEMS && data != null) {           //邮件奖励领取\r\n                EffectMgr.getInstance().refreshData(data.dictPrize);\r\n                RoleMgr.getInstance().refreshData(data.dictPrize);\r\n            }\r\n            if (id == dataids.ID_GET_BOXPRIZE && data != null) {\r\n                for (let i = 0; i < data.length; i++) {\r\n                    UserMgr.getInstance().refreshData(id, data[i]);\r\n                    EffectMgr.getInstance().addEffect(data[i].listTejis);\r\n                }\r\n            }\r\n            if (id == dataids.ID_GET_ALLTYPE_ITEMS && data != null) {\r\n                UserMgr.getInstance().getAllTypeItem(data);\r\n                console.log(EffectMgr.getInstance().isInit)\r\n                if (EffectMgr.getInstance().isInit) {\r\n                    EffectMgr.getInstance().getAllTypeItem(data);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n}"]}